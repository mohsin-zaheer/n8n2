{
  "testName": "User Test",
  "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
  "sessionId": "complete_e2e_user_test_1754939073943",
  "timestamp": "2025-08-11T19:04:33.944Z",
  "duration": 131330,
  "success": true,
  "phases": {
    "discovery": {
      "name": "Discovery",
      "success": true,
      "metrics": {
        "startTime": 1754939074602,
        "endTime": 1754939113539,
        "duration": 38937,
        "memoryUsage": {
          "heapUsed": -5401008,
          "heapTotal": 31916032,
          "external": 6340648
        }
      },
      "logs": [
        {
          "timestamp": "2025-08-11T19:04:34.603Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Starting discovery phase"
        },
        {
          "timestamp": "2025-08-11T19:04:34.603Z",
          "level": "DEBUG",
          "source": "Claude",
          "message": "Sending request for discovery phase"
        },
        {
          "timestamp": "2025-08-11T19:04:50.378Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: get_node_for_task"
        },
        {
          "timestamp": "2025-08-11T19:04:50.378Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"task\":\"chat_with_ai\"}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.379Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: get_node_for_task"
        },
        {
          "timestamp": "2025-08-11T19:04:50.379Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"task\":\"insert_postgres_data\"}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.562Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool get_node_for_task completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.566Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool get_node_for_task completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"google\",\"limit\":20}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"vision\",\"limit\":20}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"image\",\"limit\":20}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"aws\",\"limit\":20}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:50.568Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"social\",\"limit\":20}"
        },
        {
          "timestamp": "2025-08-11T19:04:50.697Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.712Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.735Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.761Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:50.864Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:04:58.842Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:04:58.842Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"google drive\",\"limit\":5}"
        },
        {
          "timestamp": "2025-08-11T19:04:59.003Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:01.223Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:05:01.223Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"social media twitter facebook instagram\",\"limit\":10}"
        },
        {
          "timestamp": "2025-08-11T19:05:01.359Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:03.444Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: search_nodes"
        },
        {
          "timestamp": "2025-08-11T19:05:03.444Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"query\":\"database mysql postgres mongodb\",\"limit\":10}"
        },
        {
          "timestamp": "2025-08-11T19:05:03.606Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool search_nodes completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:13.438Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: nodes-base.postgres (Insert data into PostgreSQL table)"
        },
        {
          "timestamp": "2025-08-11T19:05:13.438Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: nodes-base.openAi (Send a message to an AI model and get response)"
        },
        {
          "timestamp": "2025-08-11T19:05:13.538Z",
          "level": "DEBUG",
          "source": "Orchestrator",
          "message": "Session state updated"
        },
        {
          "timestamp": "2025-08-11T19:05:13.539Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Data flow captured: 3 transformations"
        }
      ],
      "nodes": [
        {
          "id": "task_node_2",
          "type": "nodes-base.postgres",
          "purpose": "Insert data into PostgreSQL table"
        },
        {
          "id": "task_node_1",
          "type": "nodes-base.openAi",
          "purpose": "Send a message to an AI model and get response"
        }
      ],
      "sessionState": {
        "sessionId": "complete_e2e_user_test_1754939073943",
        "createdAt": "2025-08-11T19:04:34.643Z",
        "state": {
          "phase": "configuration",
          "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
          "discovered": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "config": {
                "table": "",
                "columns": "",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "operation": "insert",
                "retryOnFail": true,
                "returnFields": "*",
                "waitBetweenTries": 1000
              },
              "purpose": "Insert data into PostgreSQL table",
              "displayName": "insert postgres data",
              "isPreConfigured": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "config": {
                "modelId": "gpt-3.5-turbo",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "resource": "chat",
                "operation": "message",
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "purpose": "Send a message to an AI model and get response",
              "displayName": "chat with ai",
              "isPreConfigured": true
            }
          ],
          "selected": [
            "task_node_2",
            "task_node_1"
          ],
          "configured": {},
          "validated": {},
          "workflow": {
            "nodes": [],
            "settings": {},
            "connections": {}
          },
          "buildPhases": [],
          "operationHistory": [
            {
              "node": {
                "id": "task_node_2",
                "type": "nodes-base.postgres",
                "config": {
                  "table": "",
                  "columns": "",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "retryOnFail": true,
                  "returnFields": "*",
                  "waitBetweenTries": 1000
                },
                "purpose": "Insert data into PostgreSQL table",
                "displayName": "insert postgres data",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_2",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "node": {
                "id": "task_node_1",
                "type": "nodes-base.openAi",
                "config": {
                  "modelId": "gpt-3.5-turbo",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "user",
                        "content": ""
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "retryOnFail": true,
                  "alwaysOutputData": true,
                  "waitBetweenTries": 5000
                },
                "purpose": "Send a message to an AI model and get response",
                "displayName": "chat with ai",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_1",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "completePhase",
              "phase": "discovery",
              "timestamp": "2025-08-11T19:05:12.824Z"
            }
          ],
          "pendingClarifications": [],
          "clarificationHistory": []
        }
      },
      "stateChanges": {},
      "dataFlow": {
        "input": {
          "prompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected."
        },
        "output": {
          "nodes": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "displayName": "insert postgres data",
              "purpose": "Insert data into PostgreSQL table",
              "isPreConfigured": true,
              "config": {
                "operation": "insert",
                "table": "",
                "columns": "",
                "returnFields": "*",
                "onError": "stopWorkflow",
                "retryOnFail": true,
                "maxTries": 2,
                "waitBetweenTries": 1000
              }
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "displayName": "chat with ai",
              "purpose": "Send a message to an AI model and get response",
              "isPreConfigured": true,
              "config": {
                "resource": "chat",
                "operation": "message",
                "modelId": "gpt-3.5-turbo",
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 3,
                "waitBetweenTries": 5000,
                "alwaysOutputData": true
              }
            }
          ]
        },
        "transformations": [
          "Intent Analysis",
          "Node Discovery",
          "Selection"
        ]
      }
    },
    "configuration": {
      "name": "Configuration",
      "success": true,
      "metrics": {
        "startTime": 1754939113540,
        "endTime": 1754939126512,
        "duration": 12972,
        "memoryUsage": {
          "heapUsed": 1269656,
          "heapTotal": 32440320,
          "external": 6534182
        }
      },
      "logs": [
        {
          "timestamp": "2025-08-11T19:05:13.540Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Starting configuration phase"
        },
        {
          "timestamp": "2025-08-11T19:05:13.540Z",
          "level": "DEBUG",
          "source": "Claude",
          "message": "Sending request for configuration phase"
        },
        {
          "timestamp": "2025-08-11T19:05:13.607Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: get_node_essentials"
        },
        {
          "timestamp": "2025-08-11T19:05:13.608Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"nodeType\":\"nodes-base.postgres\"}"
        },
        {
          "timestamp": "2025-08-11T19:05:13.608Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: get_node_essentials"
        },
        {
          "timestamp": "2025-08-11T19:05:13.608Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"nodeType\":\"nodes-base.openAi\"}"
        },
        {
          "timestamp": "2025-08-11T19:05:13.786Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool get_node_essentials completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:13.790Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool get_node_essentials completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:22.462Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: validate_node_minimal"
        },
        {
          "timestamp": "2025-08-11T19:05:22.462Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"nodeType\":\"nodes-base.postgres\",\"config\":{\"table\":\"image_metadata\",\"columns\":\"original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id\",\"operation\":\"insert\",\"returnFields\":\"id, original_filename, upload_timestamp\",\"values\":\"{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}\"}}"
        },
        {
          "timestamp": "2025-08-11T19:05:22.637Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool validate_node_minimal completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:22.638Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: validate_node_minimal"
        },
        {
          "timestamp": "2025-08-11T19:05:22.638Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"nodeType\":\"nodes-base.postgres\",\"config\":{\"table\":\"image_metadata\",\"columns\":\"original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id\",\"operation\":\"insert\",\"returnFields\":\"id, original_filename, upload_timestamp\",\"values\":\"{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}\",\"schema\":\"public\"}}"
        },
        {
          "timestamp": "2025-08-11T19:05:22.828Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool validate_node_minimal completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:25.423Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: validate_node_minimal"
        },
        {
          "timestamp": "2025-08-11T19:05:25.423Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"nodeType\":\"nodes-base.openAi\",\"config\":{\"modelId\":\"gpt-4\",\"messages\":{\"values\":[{\"role\":\"system\",\"content\":\"You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally.\"},{\"role\":\"user\",\"content\":\"Based on this image analysis data: {{ $json.visionAnalysis }}\\n\\nAnd these detected tags: {{ $json.tags }}\\n\\nCreate an SEO-optimized description for this image that:\\n1. Is 150-200 characters for social media\\n2. Includes relevant keywords naturally\\n3. Is engaging and descriptive\\n4. Mentions key visual elements\\n5. Uses appropriate hashtags\\n\\nImage filename: {{ $json.filename }}\\nDetected objects: {{ $json.detectedObjects }}\\nColors: {{ $json.dominantColors }}\\nScene type: {{ $json.sceneType }}\"}]},\"resource\":\"chat\",\"operation\":\"message\",\"options\":{\"temperature\":0.7,\"maxTokens\":300}}}"
        },
        {
          "timestamp": "2025-08-11T19:05:25.542Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool validate_node_minimal completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:05:26.446Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: nodes-base.postgres (Insert data into PostgreSQL table)"
        },
        {
          "timestamp": "2025-08-11T19:05:26.447Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: nodes-base.openAi (Send a message to an AI model and get response)"
        },
        {
          "timestamp": "2025-08-11T19:05:26.512Z",
          "level": "DEBUG",
          "source": "Orchestrator",
          "message": "Session state updated"
        },
        {
          "timestamp": "2025-08-11T19:05:26.512Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Data flow captured: 3 transformations"
        }
      ],
      "nodes": [
        {
          "id": "task_node_2",
          "type": "nodes-base.postgres",
          "purpose": "Insert data into PostgreSQL table",
          "configuration": {
            "onError": "stopWorkflow",
            "maxTries": 2,
            "retryOnFail": true,
            "waitBetweenTries": 1000,
            "typeVersion": 2.4,
            "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
            "parameters": {
              "table": "image_metadata",
              "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
              "operation": "insert",
              "returnFields": "id, original_filename, upload_timestamp",
              "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
              "schema": "public"
            }
          },
          "validationStatus": "valid"
        },
        {
          "id": "task_node_1",
          "type": "nodes-base.openAi",
          "purpose": "Send a message to an AI model and get response",
          "configuration": {
            "onError": "continueRegularOutput",
            "maxTries": 3,
            "retryOnFail": true,
            "alwaysOutputData": true,
            "waitBetweenTries": 5000,
            "typeVersion": 1,
            "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
            "parameters": {
              "modelId": "gpt-4",
              "messages": {
                "values": [
                  {
                    "role": "system",
                    "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                  },
                  {
                    "role": "user",
                    "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                  }
                ]
              },
              "resource": "chat",
              "operation": "message",
              "options": {
                "temperature": 0.7,
                "maxTokens": 300
              }
            }
          },
          "validationStatus": "valid"
        }
      ],
      "sessionState": {
        "sessionId": "complete_e2e_user_test_1754939073943",
        "createdAt": "2025-08-11T19:04:34.643Z",
        "state": {
          "phase": "building",
          "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
          "discovered": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "config": {
                "table": "",
                "columns": "",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "operation": "insert",
                "retryOnFail": true,
                "returnFields": "*",
                "waitBetweenTries": 1000
              },
              "purpose": "Insert data into PostgreSQL table",
              "displayName": "insert postgres data",
              "isPreConfigured": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "config": {
                "modelId": "gpt-3.5-turbo",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "resource": "chat",
                "operation": "message",
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "purpose": "Send a message to an AI model and get response",
              "displayName": "chat with ai",
              "isPreConfigured": true
            }
          ],
          "selected": [
            "task_node_2",
            "task_node_1"
          ],
          "configured": {},
          "validated": {},
          "workflow": {
            "nodes": [],
            "settings": {},
            "connections": {}
          },
          "buildPhases": [],
          "operationHistory": [
            {
              "node": {
                "id": "task_node_2",
                "type": "nodes-base.postgres",
                "config": {
                  "table": "",
                  "columns": "",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "retryOnFail": true,
                  "returnFields": "*",
                  "waitBetweenTries": 1000
                },
                "purpose": "Insert data into PostgreSQL table",
                "displayName": "insert postgres data",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_2",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "node": {
                "id": "task_node_1",
                "type": "nodes-base.openAi",
                "config": {
                  "modelId": "gpt-3.5-turbo",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "user",
                        "content": ""
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "retryOnFail": true,
                  "alwaysOutputData": true,
                  "waitBetweenTries": 5000
                },
                "purpose": "Send a message to an AI model and get response",
                "displayName": "chat with ai",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_1",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "completePhase",
              "phase": "discovery",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "setPhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:25.543Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "parameters": {
                  "table": "image_metadata",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp"
                },
                "retryOnFail": true,
                "typeVersion": 2.4,
                "waitBetweenTries": 1000
              },
              "nodeId": "task_node_2",
              "purpose": "Insert data into PostgreSQL table",
              "nodeType": "nodes-base.postgres",
              "reasoning": "Customized the template for image metadata storage in the workflow context",
              "timestamp": "2025-08-11T19:05:25.792Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.053Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "parameters": {
                  "modelId": "gpt-4",
                  "options": {
                    "maxTokens": 300,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message"
                },
                "retryOnFail": true,
                "typeVersion": 1,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "nodeId": "task_node_1",
              "purpose": "Send a message to an AI model and get response",
              "nodeType": "nodes-base.openAi",
              "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
              "timestamp": "2025-08-11T19:05:26.053Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "completePhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:26.280Z"
            }
          ],
          "pendingClarifications": [],
          "clarificationHistory": []
        }
      },
      "stateChanges": {},
      "dataFlow": {
        "input": {
          "discoveredNodes": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "displayName": "insert postgres data",
              "purpose": "Insert data into PostgreSQL table",
              "isPreConfigured": true,
              "config": {
                "operation": "insert",
                "table": "",
                "columns": "",
                "returnFields": "*",
                "onError": "stopWorkflow",
                "retryOnFail": true,
                "maxTries": 2,
                "waitBetweenTries": 1000
              }
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "displayName": "chat with ai",
              "purpose": "Send a message to an AI model and get response",
              "isPreConfigured": true,
              "config": {
                "resource": "chat",
                "operation": "message",
                "modelId": "gpt-3.5-turbo",
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 3,
                "waitBetweenTries": 5000,
                "alwaysOutputData": true
              }
            }
          ]
        },
        "output": {
          "configuredNodes": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "purpose": "Insert data into PostgreSQL table",
              "config": {
                "onError": "stopWorkflow",
                "maxTries": 2,
                "retryOnFail": true,
                "waitBetweenTries": 1000,
                "typeVersion": 2.4,
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "parameters": {
                  "table": "image_metadata",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "schema": "public"
                }
              },
              "validated": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "purpose": "Send a message to an AI model and get response",
              "config": {
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000,
                "typeVersion": 1,
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "parameters": {
                  "modelId": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 300
                  }
                }
              },
              "validated": true
            }
          ]
        },
        "transformations": [
          "Parameter Configuration",
          "Validation",
          "Type Checking"
        ]
      },
      "stateDelta": {
        "added": {},
        "modified": {
          "state": {
            "old": {
              "phase": "configuration",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "nodes": [],
                "settings": {},
                "connections": {}
              },
              "buildPhases": [],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            },
            "new": {
              "phase": "building",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "nodes": [],
                "settings": {},
                "connections": {}
              },
              "buildPhases": [],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            }
          }
        },
        "removed": [],
        "unchanged": [
          "sessionId",
          "createdAt"
        ]
      }
    },
    "building": {
      "name": "Building",
      "success": true,
      "metrics": {
        "startTime": 1754939126512,
        "endTime": 1754939179322,
        "duration": 52810,
        "memoryUsage": {
          "heapUsed": 625904,
          "heapTotal": 31653888,
          "external": 6749874
        }
      },
      "logs": [
        {
          "timestamp": "2025-08-11T19:05:26.513Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Starting building phase"
        },
        {
          "timestamp": "2025-08-11T19:05:26.513Z",
          "level": "DEBUG",
          "source": "Claude",
          "message": "Sending request for building phase"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.googleDrive (Monitor Google Drive)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.if (Check for New Images)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.googleDrive (Download Image)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.openAi (AI Vision Analysis)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.openAi (Generate SEO Description)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.173Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.code (Process Image Sizes)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.awsS3 (Upload to S3)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.set (Prepare Database Data)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.postgres (Update Database)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.twitter (Post to Twitter)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.instagram (Post to Instagram)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Added node: n8n-nodes-base.set (Update Social Status)"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Created 12 nodes"
        },
        {
          "timestamp": "2025-08-11T19:06:19.174Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Created 11 connection groups"
        },
        {
          "timestamp": "2025-08-11T19:06:19.322Z",
          "level": "DEBUG",
          "source": "Orchestrator",
          "message": "Session state updated"
        },
        {
          "timestamp": "2025-08-11T19:06:19.322Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Data flow captured: 3 transformations"
        }
      ],
      "nodes": [
        {
          "id": "googleDrive_1",
          "type": "n8n-nodes-base.googleDrive",
          "purpose": "Monitor Google Drive"
        },
        {
          "id": "if_1",
          "type": "n8n-nodes-base.if",
          "purpose": "Check for New Images"
        },
        {
          "id": "googleDrive_2",
          "type": "n8n-nodes-base.googleDrive",
          "purpose": "Download Image"
        },
        {
          "id": "openAi_1",
          "type": "n8n-nodes-base.openAi",
          "purpose": "AI Vision Analysis"
        },
        {
          "id": "openAi_2",
          "type": "n8n-nodes-base.openAi",
          "purpose": "Generate SEO Description"
        },
        {
          "id": "code_1",
          "type": "n8n-nodes-base.code",
          "purpose": "Process Image Sizes"
        },
        {
          "id": "awsS3_1",
          "type": "n8n-nodes-base.awsS3",
          "purpose": "Upload to S3"
        },
        {
          "id": "set_1",
          "type": "n8n-nodes-base.set",
          "purpose": "Prepare Database Data"
        },
        {
          "id": "postgres_1",
          "type": "n8n-nodes-base.postgres",
          "purpose": "Update Database"
        },
        {
          "id": "twitter_1",
          "type": "n8n-nodes-base.twitter",
          "purpose": "Post to Twitter"
        },
        {
          "id": "instagram_1",
          "type": "n8n-nodes-base.instagram",
          "purpose": "Post to Instagram"
        },
        {
          "id": "set_2",
          "type": "n8n-nodes-base.set",
          "purpose": "Update Social Status"
        }
      ],
      "sessionState": {
        "sessionId": "complete_e2e_user_test_1754939073943",
        "createdAt": "2025-08-11T19:04:34.643Z",
        "state": {
          "phase": "validation",
          "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
          "discovered": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "config": {
                "table": "",
                "columns": "",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "operation": "insert",
                "retryOnFail": true,
                "returnFields": "*",
                "waitBetweenTries": 1000
              },
              "purpose": "Insert data into PostgreSQL table",
              "displayName": "insert postgres data",
              "isPreConfigured": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "config": {
                "modelId": "gpt-3.5-turbo",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "resource": "chat",
                "operation": "message",
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "purpose": "Send a message to an AI model and get response",
              "displayName": "chat with ai",
              "isPreConfigured": true
            }
          ],
          "selected": [
            "task_node_2",
            "task_node_1"
          ],
          "configured": {},
          "validated": {},
          "workflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "name": "Monitor Google Drive",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  },
                  "folderId": "={{ $parameter.folderId }}",
                  "operation": "list"
                },
                "typeVersion": 3
              },
              {
                "id": "if_1",
                "name": "Check for New Images",
                "type": "n8n-nodes-base.if",
                "onError": "continueRegularOutput",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "typeVersion": 1
              },
              {
                "id": "googleDrive_2",
                "name": "Download Image",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  },
                  "operation": "download"
                },
                "typeVersion": 3
              },
              {
                "id": "openAi_1",
                "name": "AI Vision Analysis",
                "type": "n8n-nodes-base.openAi",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "options": {
                    "temperature": 0.3
                  },
                  "resource": "image",
                  "maxTokens": 500,
                  "operation": "analyze"
                },
                "typeVersion": 1
              },
              {
                "id": "openAi_2",
                "name": "Generate SEO Description",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "model": "gpt-4",
                  "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                  "onError": "continueRegularOutput",
                  "options": {
                    "maxTokens": 800,
                    "temperature": 0.7
                  },
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "resource": "text",
                  "operation": "message"
                },
                "typeVersion": 1
              },
              {
                "id": "code_1",
                "name": "Process Image Sizes",
                "type": "n8n-nodes-base.code",
                "onError": "continueRegularOutput",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "typeVersion": 2
              },
              {
                "id": "awsS3_1",
                "name": "Upload to S3",
                "type": "n8n-nodes-base.awsS3",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  },
                  "fileName": "images/{{ $json.name }}",
                  "operation": "upload",
                  "binaryData": true,
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "binaryPropertyName": "imageData"
                },
                "retryOnFail": true,
                "typeVersion": 1
              },
              {
                "id": "set_1",
                "name": "Prepare Database Data",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "type": "string",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "type": "string",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "type": "string",
                        "value": "={{ new Date().toISOString() }}"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "type": "string",
                        "value": "processed"
                      }
                    ]
                  }
                },
                "typeVersion": 3
              },
              {
                "id": "postgres_1",
                "name": "Update Database",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                  "table": "image_metadata",
                  "schema": "public",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "onError": "stopWorkflow",
                  "options": {
                    "queryBatching": "independently"
                  },
                  "maxTries": 2,
                  "operation": "insert",
                  "returnFields": "*"
                },
                "typeVersion": 2
              },
              {
                "id": "twitter_1",
                "name": "Post to Twitter",
                "type": "n8n-nodes-base.twitter",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "operation": "tweet",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "retryOnFail": true,
                "typeVersion": 2
              },
              {
                "id": "instagram_1",
                "name": "Post to Instagram",
                "type": "n8n-nodes-base.instagram",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "type": "image",
                  "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "operation": "post",
                  "binaryPropertyName": "web"
                },
                "retryOnFail": true,
                "typeVersion": 1
              },
              {
                "id": "set_2",
                "name": "Update Social Status",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "type": "string",
                        "value": "completed"
                      }
                    ]
                  }
                },
                "typeVersion": 3
              }
            ],
            "settings": {
              "executionOrder": "v1",
              "saveManualExecutions": true,
              "saveDataErrorExecution": "all",
              "saveDataSuccessExecution": "all"
            },
            "connections": {
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            }
          },
          "buildPhases": [
            {
              "type": "trigger",
              "nodeIds": [
                "googleDrive_1"
              ],
              "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
            },
            {
              "type": "decision",
              "nodeIds": [
                "if_1"
              ],
              "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
            },
            {
              "type": "data_collection",
              "nodeIds": [
                "googleDrive_2"
              ],
              "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
            },
            {
              "type": "data_processing",
              "nodeIds": [
                "openAi_1",
                "openAi_2",
                "code_1"
              ],
              "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
            },
            {
              "type": "storage",
              "nodeIds": [
                "awsS3_1",
                "set_1"
              ],
              "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
            },
            {
              "type": "integration",
              "nodeIds": [
                "postgres_1",
                "twitter_1",
                "instagram_1",
                "set_2"
              ],
              "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
            }
          ],
          "operationHistory": [
            {
              "node": {
                "id": "task_node_2",
                "type": "nodes-base.postgres",
                "config": {
                  "table": "",
                  "columns": "",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "retryOnFail": true,
                  "returnFields": "*",
                  "waitBetweenTries": 1000
                },
                "purpose": "Insert data into PostgreSQL table",
                "displayName": "insert postgres data",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_2",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "node": {
                "id": "task_node_1",
                "type": "nodes-base.openAi",
                "config": {
                  "modelId": "gpt-3.5-turbo",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "user",
                        "content": ""
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "retryOnFail": true,
                  "alwaysOutputData": true,
                  "waitBetweenTries": 5000
                },
                "purpose": "Send a message to an AI model and get response",
                "displayName": "chat with ai",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_1",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "completePhase",
              "phase": "discovery",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "setPhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:25.543Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "parameters": {
                  "table": "image_metadata",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp"
                },
                "retryOnFail": true,
                "typeVersion": 2.4,
                "waitBetweenTries": 1000
              },
              "nodeId": "task_node_2",
              "purpose": "Insert data into PostgreSQL table",
              "nodeType": "nodes-base.postgres",
              "reasoning": "Customized the template for image metadata storage in the workflow context",
              "timestamp": "2025-08-11T19:05:25.792Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.053Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "parameters": {
                  "modelId": "gpt-4",
                  "options": {
                    "maxTokens": 300,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message"
                },
                "retryOnFail": true,
                "typeVersion": 1,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "nodeId": "task_node_1",
              "purpose": "Send a message to an AI model and get response",
              "nodeType": "nodes-base.openAi",
              "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
              "timestamp": "2025-08-11T19:05:26.053Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "completePhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "setPhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.704Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "analyze"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                      "onError": "continueRegularOutput",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "message"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "onError": "stopWorkflow",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "maxTries": 2,
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.instagram",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "type": "image",
                      "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "post",
                      "binaryPropertyName": "web"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  }
                ],
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "setBuildPhases",
              "phases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "completePhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.954Z"
            }
          ],
          "pendingClarifications": [],
          "clarificationHistory": []
        }
      },
      "stateChanges": {},
      "dataFlow": {
        "input": {
          "configuredNodes": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "purpose": "Insert data into PostgreSQL table",
              "config": {
                "onError": "stopWorkflow",
                "maxTries": 2,
                "retryOnFail": true,
                "waitBetweenTries": 1000,
                "typeVersion": 2.4,
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "parameters": {
                  "table": "image_metadata",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "schema": "public"
                }
              },
              "validated": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "purpose": "Send a message to an AI model and get response",
              "config": {
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000,
                "typeVersion": 1,
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "parameters": {
                  "modelId": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 300
                  }
                }
              },
              "validated": true
            }
          ]
        },
        "output": {
          "workflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "operation": "list",
                  "folderId": "={{ $parameter.folderId }}",
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  }
                },
                "name": "Monitor Google Drive",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "if_1",
                "type": "n8n-nodes-base.if",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "name": "Check for New Images",
                "typeVersion": 1,
                "onError": "continueRegularOutput"
              },
              {
                "id": "googleDrive_2",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "operation": "download",
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  }
                },
                "name": "Download Image",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "openAi_1",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "resource": "image",
                  "operation": "analyze",
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "maxTokens": 500,
                  "options": {
                    "temperature": 0.3
                  }
                },
                "name": "AI Vision Analysis",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "openAi_2",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "resource": "text",
                  "operation": "message",
                  "model": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 800
                  }
                },
                "name": "Generate SEO Description",
                "typeVersion": 1
              },
              {
                "id": "code_1",
                "type": "n8n-nodes-base.code",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "name": "Process Image Sizes",
                "typeVersion": 2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "awsS3_1",
                "type": "n8n-nodes-base.awsS3",
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "operation": "upload",
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "fileName": "images/{{ $json.name }}",
                  "binaryData": true,
                  "binaryPropertyName": "imageData",
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  }
                },
                "name": "Upload to S3",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_1",
                "type": "n8n-nodes-base.set",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}",
                        "type": "string"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}",
                        "type": "string"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}",
                        "type": "string"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}",
                        "type": "string"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}",
                        "type": "string"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}",
                        "type": "string"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "value": "={{ new Date().toISOString() }}",
                        "type": "string"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "value": "processed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Prepare Database Data",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "postgres_1",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "schema": "public",
                  "table": "image_metadata",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "returnFields": "*",
                  "options": {
                    "queryBatching": "independently"
                  }
                },
                "name": "Update Database",
                "typeVersion": 2
              },
              {
                "id": "twitter_1",
                "type": "n8n-nodes-base.twitter",
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "operation": "tweet",
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "name": "Post to Twitter",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "instagram_1",
                "type": "n8n-nodes-base.instagram",
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "operation": "post",
                  "type": "image",
                  "binaryPropertyName": "web",
                  "caption": "={{ $('Prepare Database Data').item.json.social_caption }}"
                },
                "name": "Post to Instagram",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_2",
                "type": "n8n-nodes-base.set",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "value": "completed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Update Social Status",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              }
            ],
            "connections": {
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            },
            "settings": {
              "executionOrder": "v1",
              "saveDataSuccessExecution": "all",
              "saveDataErrorExecution": "all",
              "saveManualExecutions": true
            }
          }
        },
        "transformations": [
          "Workflow Generation",
          "Connection Building",
          "Settings Configuration"
        ]
      },
      "stateDelta": {
        "added": {
          "state": {
            "workflow": {
              "name": "AI-Powered Image Processing and Social Media Automation",
              "settings": {
                "executionOrder": "v1",
                "saveManualExecutions": true,
                "saveDataErrorExecution": "all",
                "saveDataSuccessExecution": "all"
              },
              "connections": {
                "Upload to S3": {
                  "main": [
                    [
                      {
                        "node": "Prepare Database Data",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Download Image": {
                  "main": [
                    [
                      {
                        "node": "AI Vision Analysis",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Post to Twitter": {
                  "main": [
                    [
                      {
                        "node": "Update Social Status",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Update Database": {
                  "main": [
                    [
                      {
                        "node": "Post to Twitter",
                        "type": "main",
                        "index": 0
                      },
                      {
                        "node": "Post to Instagram",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Post to Instagram": {
                  "main": [
                    [
                      {
                        "node": "Update Social Status",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "AI Vision Analysis": {
                  "main": [
                    [
                      {
                        "node": "Generate SEO Description",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Process Image Sizes": {
                  "main": [
                    [
                      {
                        "node": "Upload to S3",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Check for New Images": {
                  "main": [
                    [
                      {
                        "node": "Download Image",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Monitor Google Drive": {
                  "main": [
                    [
                      {
                        "node": "Check for New Images",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Prepare Database Data": {
                  "main": [
                    [
                      {
                        "node": "Update Database",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                },
                "Generate SEO Description": {
                  "main": [
                    [
                      {
                        "node": "Process Image Sizes",
                        "type": "main",
                        "index": 0
                      }
                    ]
                  ]
                }
              }
            }
          }
        },
        "modified": {
          "state": {
            "old": {
              "phase": "building",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "nodes": [],
                "settings": {},
                "connections": {}
              },
              "buildPhases": [],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            },
            "new": {
              "phase": "validation",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "analyze"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                      "onError": "continueRegularOutput",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "message"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "onError": "stopWorkflow",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "maxTries": 2,
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.instagram",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "type": "image",
                      "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "post",
                      "binaryPropertyName": "web"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  }
                ],
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "buildPhases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "setPhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.704Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "analyze"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                          "onError": "continueRegularOutput",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "maxTries": 3,
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "message"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "onError": "stopWorkflow",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "maxTries": 2,
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.instagram",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "type": "image",
                          "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "post",
                          "binaryPropertyName": "web"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      }
                    ],
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setBuildPhases",
                  "phases": [
                    {
                      "type": "trigger",
                      "nodeIds": [
                        "googleDrive_1"
                      ],
                      "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    {
                      "type": "decision",
                      "nodeIds": [
                        "if_1"
                      ],
                      "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    {
                      "type": "data_collection",
                      "nodeIds": [
                        "googleDrive_2"
                      ],
                      "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    {
                      "type": "data_processing",
                      "nodeIds": [
                        "openAi_1",
                        "openAi_2",
                        "code_1"
                      ],
                      "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    {
                      "type": "storage",
                      "nodeIds": [
                        "awsS3_1",
                        "set_1"
                      ],
                      "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                    },
                    {
                      "type": "integration",
                      "nodeIds": [
                        "postgres_1",
                        "twitter_1",
                        "instagram_1",
                        "set_2"
                      ],
                      "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    }
                  ],
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "completePhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.954Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            }
          }
        },
        "removed": [],
        "unchanged": [
          "sessionId",
          "createdAt"
        ]
      }
    },
    "validation": {
      "name": "Validation",
      "success": true,
      "metrics": {
        "startTime": 1754939179323,
        "endTime": 1754939204625,
        "duration": 25302,
        "memoryUsage": {
          "heapUsed": 2644464,
          "heapTotal": 36634624,
          "external": 7340932
        }
      },
      "logs": [
        {
          "timestamp": "2025-08-11T19:06:19.323Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Starting validation phase"
        },
        {
          "timestamp": "2025-08-11T19:06:19.323Z",
          "level": "DEBUG",
          "source": "Claude",
          "message": "Sending request for validation phase"
        },
        {
          "timestamp": "2025-08-11T19:06:19.324Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: validate_workflow"
        },
        {
          "timestamp": "2025-08-11T19:06:19.324Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"workflow\":{\"name\":\"AI-Powered Image Processing and Social Media Automation\",\"nodes\":[{\"id\":\"googleDrive_1\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[250,300],\"parameters\":{\"operation\":\"list\",\"folderId\":\"={{ $parameter.folderId }}\",\"filters\":{\"mimeType\":\"image/jpeg,image/png,image/gif,image/webp\"},\"options\":{\"fields\":\"files(id,name,mimeType,createdTime,size,webViewLink)\"}},\"name\":\"Monitor Google Drive\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"},{\"id\":\"if_1\",\"type\":\"n8n-nodes-base.if\",\"position\":[550,300],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $json.createdTime }}\",\"operation\":\"isNotEmpty\"}]}},\"name\":\"Check for New Images\",\"typeVersion\":1,\"onError\":\"continueRegularOutput\"},{\"id\":\"googleDrive_2\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[850,300],\"parameters\":{\"operation\":\"download\",\"fileId\":\"={{ $json.id }}\",\"options\":{\"binaryPropertyName\":\"imageData\"}},\"name\":\"Download Image\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"},{\"id\":\"openAi_1\",\"type\":\"n8n-nodes-base.openAi\",\"position\":[1150,300],\"parameters\":{\"resource\":\"image\",\"operation\":\"analyze\",\"model\":\"gpt-4-vision-preview\",\"prompt\":\"Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.\",\"maxTokens\":500,\"options\":{\"temperature\":0.3}},\"name\":\"AI Vision Analysis\",\"typeVersion\":1,\"onError\":\"continueRegularOutput\",\"maxTries\":3},{\"id\":\"openAi_2\",\"type\":\"n8n-nodes-base.openAi\",\"position\":[1450,300],\"parameters\":{\"notes\":\"Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags\",\"onError\":\"continueRegularOutput\",\"maxTries\":3,\"resource\":\"text\",\"operation\":\"message\",\"model\":\"gpt-4\",\"messages\":{\"values\":[{\"role\":\"system\",\"content\":\"You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis.\"},{\"role\":\"user\",\"content\":\"Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON.\"}]},\"options\":{\"temperature\":0.7,\"maxTokens\":800}},\"name\":\"Generate SEO Description\",\"typeVersion\":1},{\"id\":\"code_1\",\"type\":\"n8n-nodes-base.code\",\"position\":[1750,300],\"parameters\":{\"mode\":\"runOnceForAllItems\",\"jsCode\":\"// Image resizing logic for web and mobile\\nconst sharp = require('sharp');\\nconst items = $input.all();\\nconst results = [];\\n\\nfor (const item of items) {\\n  const imageBuffer = item.binary.imageData.data;\\n  \\n  // Create different sizes\\n  const sizes = {\\n    thumbnail: { width: 150, height: 150 },\\n    mobile: { width: 480, height: 320 },\\n    web: { width: 1200, height: 800 },\\n    social: { width: 1080, height: 1080 }\\n  };\\n  \\n  const resizedImages = {};\\n  \\n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\\n    const resized = await sharp(imageBuffer)\\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\\n      .jpeg({ quality: 85 })\\n      .toBuffer();\\n    \\n    resizedImages[sizeName] = {\\n      data: resized,\\n      mimeType: 'image/jpeg',\\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\\n    };\\n  }\\n  \\n  results.push({\\n    json: {\\n      ...item.json,\\n      resizedImages: Object.keys(resizedImages),\\n      originalSize: imageBuffer.length\\n    },\\n    binary: {\\n      ...item.binary,\\n      ...resizedImages\\n    }\\n  });\\n}\\n\\nreturn results;\"},\"name\":\"Process Image Sizes\",\"typeVersion\":2,\"onError\":\"continueRegularOutput\"},{\"id\":\"awsS3_1\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[2050,300],\"parameters\":{\"operation\":\"upload\",\"bucketName\":\"={{ $parameter.s3Bucket }}\",\"fileName\":\"images/{{ $json.name }}\",\"binaryData\":true,\"binaryPropertyName\":\"imageData\",\"options\":{\"acl\":\"public-read\",\"storageClass\":\"STANDARD_IA\"}},\"name\":\"Upload to S3\",\"typeVersion\":1,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"set_1\",\"type\":\"n8n-nodes-base.set\",\"position\":[2350,300],\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"file_id\",\"name\":\"file_id\",\"value\":\"={{ $('Monitor Google Drive').item.json.id }}\",\"type\":\"string\"},{\"id\":\"file_name\",\"name\":\"file_name\",\"value\":\"={{ $('Monitor Google Drive').item.json.name }}\",\"type\":\"string\"},{\"id\":\"s3_url\",\"name\":\"s3_url\",\"value\":\"={{ $('Upload to S3').item.json.Location }}\",\"type\":\"string\"},{\"id\":\"ai_tags\",\"name\":\"ai_tags\",\"value\":\"={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}\",\"type\":\"string\"},{\"id\":\"seo_description\",\"name\":\"seo_description\",\"value\":\"={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}\",\"type\":\"string\"},{\"id\":\"social_caption\",\"name\":\"social_caption\",\"value\":\"={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}\",\"type\":\"string\"},{\"id\":\"created_at\",\"name\":\"created_at\",\"value\":\"={{ new Date().toISOString() }}\",\"type\":\"string\"},{\"id\":\"status\",\"name\":\"status\",\"value\":\"processed\",\"type\":\"string\"}]}},\"name\":\"Prepare Database Data\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"},{\"id\":\"postgres_1\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[2650,300],\"parameters\":{\"notes\":\"Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status\",\"onError\":\"stopWorkflow\",\"maxTries\":2,\"operation\":\"insert\",\"schema\":\"public\",\"table\":\"image_metadata\",\"columns\":\"file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status\",\"returnFields\":\"*\",\"options\":{\"queryBatching\":\"independently\"}},\"name\":\"Update Database\",\"typeVersion\":2},{\"id\":\"twitter_1\",\"type\":\"n8n-nodes-base.twitter\",\"position\":[2950,200],\"parameters\":{\"operation\":\"tweet\",\"text\":\"={{ $('Prepare Database Data').item.json.social_caption }}\",\"additionalFields\":{\"attachments\":\"={{ $('Upload to S3').item.json.Location }}\"}},\"name\":\"Post to Twitter\",\"typeVersion\":2,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"instagram_1\",\"type\":\"n8n-nodes-base.instagram\",\"position\":[2950,400],\"parameters\":{\"operation\":\"post\",\"type\":\"image\",\"binaryPropertyName\":\"web\",\"caption\":\"={{ $('Prepare Database Data').item.json.social_caption }}\"},\"name\":\"Post to Instagram\",\"typeVersion\":1,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"set_2\",\"type\":\"n8n-nodes-base.set\",\"position\":[3250,300],\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"twitter_posted\",\"name\":\"twitter_posted\",\"value\":\"={{ $('Post to Twitter').item.json.id ? true : false }}\",\"type\":\"boolean\"},{\"id\":\"instagram_posted\",\"name\":\"instagram_posted\",\"value\":\"={{ $('Post to Instagram').item.json.id ? true : false }}\",\"type\":\"boolean\"},{\"id\":\"social_status\",\"name\":\"social_status\",\"value\":\"completed\",\"type\":\"string\"}]}},\"name\":\"Update Social Status\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"}],\"connections\":{\"Monitor Google Drive\":{\"main\":[[{\"node\":\"Check for New Images\",\"type\":\"main\",\"index\":0}]]},\"Check for New Images\":{\"main\":[[{\"node\":\"Download Image\",\"type\":\"main\",\"index\":0}]]},\"Download Image\":{\"main\":[[{\"node\":\"AI Vision Analysis\",\"type\":\"main\",\"index\":0}]]},\"AI Vision Analysis\":{\"main\":[[{\"node\":\"Generate SEO Description\",\"type\":\"main\",\"index\":0}]]},\"Generate SEO Description\":{\"main\":[[{\"node\":\"Process Image Sizes\",\"type\":\"main\",\"index\":0}]]},\"Process Image Sizes\":{\"main\":[[{\"node\":\"Upload to S3\",\"type\":\"main\",\"index\":0}]]},\"Upload to S3\":{\"main\":[[{\"node\":\"Prepare Database Data\",\"type\":\"main\",\"index\":0}]]},\"Prepare Database Data\":{\"main\":[[{\"node\":\"Update Database\",\"type\":\"main\",\"index\":0}]]},\"Update Database\":{\"main\":[[{\"node\":\"Post to Twitter\",\"type\":\"main\",\"index\":0},{\"node\":\"Post to Instagram\",\"type\":\"main\",\"index\":0}]]},\"Post to Twitter\":{\"main\":[[{\"node\":\"Update Social Status\",\"type\":\"main\",\"index\":0}]]},\"Post to Instagram\":{\"main\":[[{\"node\":\"Update Social Status\",\"type\":\"main\",\"index\":0}]]}},\"settings\":{\"executionOrder\":\"v1\",\"saveDataSuccessExecution\":\"all\",\"saveDataErrorExecution\":\"all\",\"saveManualExecutions\":true}},\"options\":{\"validateNodes\":true,\"validateConnections\":true,\"validateExpressions\":true,\"profile\":\"runtime\"}}"
        },
        {
          "timestamp": "2025-08-11T19:06:19.596Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool validate_workflow completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:06:43.102Z",
          "level": "INFO",
          "source": "MCP",
          "message": "Calling tool: validate_workflow"
        },
        {
          "timestamp": "2025-08-11T19:06:43.102Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Parameters: {\"workflow\":{\"name\":\"AI-Powered Image Processing and Social Media Automation\",\"nodes\":[{\"id\":\"googleDrive_1\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[250,300],\"parameters\":{\"operation\":\"list\",\"folderId\":\"={{ $parameter.folderId }}\",\"filters\":{\"mimeType\":\"image/jpeg,image/png,image/gif,image/webp\"},\"options\":{\"fields\":\"files(id,name,mimeType,createdTime,size,webViewLink)\"}},\"name\":\"Monitor Google Drive\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"},{\"id\":\"if_1\",\"type\":\"n8n-nodes-base.if\",\"position\":[550,300],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $json.createdTime }}\",\"operation\":\"isNotEmpty\"}]}},\"name\":\"Check for New Images\",\"typeVersion\":2.2,\"onError\":\"continueRegularOutput\"},{\"id\":\"googleDrive_2\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[850,300],\"parameters\":{\"operation\":\"download\",\"fileId\":\"={{ $json.id }}\",\"options\":{\"binaryPropertyName\":\"imageData\"}},\"name\":\"Download Image\",\"typeVersion\":3,\"onError\":\"continueRegularOutput\"},{\"id\":\"openAi_1\",\"type\":\"n8n-nodes-base.openAi\",\"position\":[1150,300],\"parameters\":{\"resource\":\"image\",\"operation\":\"create\",\"model\":\"gpt-4-vision-preview\",\"prompt\":\"Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.\",\"maxTokens\":500,\"options\":{\"temperature\":0.3}},\"name\":\"AI Vision Analysis\",\"typeVersion\":1.1,\"onError\":\"continueRegularOutput\",\"maxTries\":3},{\"id\":\"openAi_2\",\"type\":\"n8n-nodes-base.openAi\",\"position\":[1450,300],\"parameters\":{\"resource\":\"text\",\"operation\":\"complete\",\"model\":\"gpt-4\",\"messages\":{\"values\":[{\"role\":\"system\",\"content\":\"You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis.\"},{\"role\":\"user\",\"content\":\"Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON.\"}]},\"options\":{\"temperature\":0.7,\"maxTokens\":800}},\"name\":\"Generate SEO Description\",\"typeVersion\":1.1,\"notes\":\"Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags\",\"onError\":\"continueRegularOutput\",\"maxTries\":3},{\"id\":\"code_1\",\"type\":\"n8n-nodes-base.code\",\"position\":[1750,300],\"parameters\":{\"mode\":\"runOnceForAllItems\",\"jsCode\":\"// Image resizing logic for web and mobile\\nconst sharp = require('sharp');\\nconst items = $input.all();\\nconst results = [];\\n\\nfor (const item of items) {\\n  const imageBuffer = item.binary.imageData.data;\\n  \\n  // Create different sizes\\n  const sizes = {\\n    thumbnail: { width: 150, height: 150 },\\n    mobile: { width: 480, height: 320 },\\n    web: { width: 1200, height: 800 },\\n    social: { width: 1080, height: 1080 }\\n  };\\n  \\n  const resizedImages = {};\\n  \\n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\\n    const resized = await sharp(imageBuffer)\\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\\n      .jpeg({ quality: 85 })\\n      .toBuffer();\\n    \\n    resizedImages[sizeName] = {\\n      data: resized,\\n      mimeType: 'image/jpeg',\\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\\n    };\\n  }\\n  \\n  results.push({\\n    json: {\\n      ...item.json,\\n      resizedImages: Object.keys(resizedImages),\\n      originalSize: imageBuffer.length\\n    },\\n    binary: {\\n      ...item.binary,\\n      ...resizedImages\\n    }\\n  });\\n}\\n\\nreturn results;\"},\"name\":\"Process Image Sizes\",\"typeVersion\":2,\"onError\":\"continueRegularOutput\"},{\"id\":\"awsS3_1\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[2050,300],\"parameters\":{\"operation\":\"upload\",\"bucketName\":\"={{ $parameter.s3Bucket }}\",\"fileName\":\"images/{{ $json.name }}\",\"binaryData\":true,\"binaryPropertyName\":\"imageData\",\"options\":{\"acl\":\"public-read\",\"storageClass\":\"STANDARD_IA\"}},\"name\":\"Upload to S3\",\"typeVersion\":2,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"set_1\",\"type\":\"n8n-nodes-base.set\",\"position\":[2350,300],\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"file_id\",\"name\":\"file_id\",\"value\":\"={{ $('Monitor Google Drive').item.json.id }}\",\"type\":\"string\"},{\"id\":\"file_name\",\"name\":\"file_name\",\"value\":\"={{ $('Monitor Google Drive').item.json.name }}\",\"type\":\"string\"},{\"id\":\"s3_url\",\"name\":\"s3_url\",\"value\":\"={{ $('Upload to S3').item.json.Location }}\",\"type\":\"string\"},{\"id\":\"ai_tags\",\"name\":\"ai_tags\",\"value\":\"={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}\",\"type\":\"string\"},{\"id\":\"seo_description\",\"name\":\"seo_description\",\"value\":\"={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}\",\"type\":\"string\"},{\"id\":\"social_caption\",\"name\":\"social_caption\",\"value\":\"={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}\",\"type\":\"string\"},{\"id\":\"created_at\",\"name\":\"created_at\",\"value\":\"={{ new Date().toISOString() }}\",\"type\":\"string\"},{\"id\":\"status\",\"name\":\"status\",\"value\":\"processed\",\"type\":\"string\"}]}},\"name\":\"Prepare Database Data\",\"typeVersion\":3.4,\"onError\":\"continueRegularOutput\"},{\"id\":\"postgres_1\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[2650,300],\"parameters\":{\"operation\":\"insert\",\"schema\":\"public\",\"table\":\"image_metadata\",\"columns\":\"file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status\",\"returnFields\":\"*\",\"options\":{\"queryBatching\":\"independently\"}},\"name\":\"Update Database\",\"typeVersion\":2.6,\"notes\":\"Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status\",\"onError\":\"stopWorkflow\",\"maxTries\":2},{\"id\":\"twitter_1\",\"type\":\"n8n-nodes-base.twitter\",\"position\":[2950,200],\"parameters\":{\"operation\":\"tweet\",\"text\":\"={{ $('Prepare Database Data').item.json.social_caption }}\",\"additionalFields\":{\"attachments\":\"={{ $('Upload to S3').item.json.Location }}\"}},\"name\":\"Post to Twitter\",\"typeVersion\":2,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"instagram_1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2950,400],\"parameters\":{\"method\":\"POST\",\"url\":\"https://graph.instagram.com/v18.0/me/media\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"instagramApi\",\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]},\"sendBody\":true,\"bodyParameters\":{\"parameters\":[{\"name\":\"image_url\",\"value\":\"={{ $('Upload to S3').item.json.Location }}\"},{\"name\":\"caption\",\"value\":\"={{ $('Prepare Database Data').item.json.social_caption }}\"}]}},\"name\":\"Post to Instagram\",\"typeVersion\":4.2,\"onError\":\"continueRegularOutput\",\"retryOnFail\":true,\"maxTries\":2},{\"id\":\"set_2\",\"type\":\"n8n-nodes-base.set\",\"position\":[3250,300],\"parameters\":{\"assignments\":{\"assignments\":[{\"id\":\"twitter_posted\",\"name\":\"twitter_posted\",\"value\":\"={{ $('Post to Twitter').item.json.id ? true : false }}\",\"type\":\"boolean\"},{\"id\":\"instagram_posted\",\"name\":\"instagram_posted\",\"value\":\"={{ $('Post to Instagram').item.json.id ? true : false }}\",\"type\":\"boolean\"},{\"id\":\"social_status\",\"name\":\"social_status\",\"value\":\"completed\",\"type\":\"string\"}]}},\"name\":\"Update Social Status\",\"typeVersion\":3.4,\"onError\":\"continueRegularOutput\"}],\"connections\":{\"Monitor Google Drive\":{\"main\":[[{\"node\":\"Check for New Images\",\"type\":\"main\",\"index\":0}]]},\"Check for New Images\":{\"main\":[[{\"node\":\"Download Image\",\"type\":\"main\",\"index\":0}]]},\"Download Image\":{\"main\":[[{\"node\":\"AI Vision Analysis\",\"type\":\"main\",\"index\":0}]]},\"AI Vision Analysis\":{\"main\":[[{\"node\":\"Generate SEO Description\",\"type\":\"main\",\"index\":0}]]},\"Generate SEO Description\":{\"main\":[[{\"node\":\"Process Image Sizes\",\"type\":\"main\",\"index\":0}]]},\"Process Image Sizes\":{\"main\":[[{\"node\":\"Upload to S3\",\"type\":\"main\",\"index\":0}]]},\"Upload to S3\":{\"main\":[[{\"node\":\"Prepare Database Data\",\"type\":\"main\",\"index\":0}]]},\"Prepare Database Data\":{\"main\":[[{\"node\":\"Update Database\",\"type\":\"main\",\"index\":0}]]},\"Update Database\":{\"main\":[[{\"node\":\"Post to Twitter\",\"type\":\"main\",\"index\":0},{\"node\":\"Post to Instagram\",\"type\":\"main\",\"index\":0}]]},\"Post to Twitter\":{\"main\":[[{\"node\":\"Update Social Status\",\"type\":\"main\",\"index\":0}]]},\"Post to Instagram\":{\"main\":[[{\"node\":\"Update Social Status\",\"type\":\"main\",\"index\":0}]]}},\"settings\":{\"executionOrder\":\"v1\",\"saveDataSuccessExecution\":\"all\",\"saveDataErrorExecution\":\"all\",\"saveManualExecutions\":true}},\"options\":{\"validateNodes\":true,\"validateConnections\":true,\"validateExpressions\":true,\"profile\":\"runtime\"}}"
        },
        {
          "timestamp": "2025-08-11T19:06:43.274Z",
          "level": "DEBUG",
          "source": "MCP",
          "message": "Tool validate_workflow completed successfully"
        },
        {
          "timestamp": "2025-08-11T19:06:44.533Z",
          "level": "ERROR",
          "source": "Orchestrator",
          "message": "Error in validation: Error 1"
        },
        {
          "timestamp": "2025-08-11T19:06:44.533Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Validation completed in 2 attempts"
        },
        {
          "timestamp": "2025-08-11T19:06:44.533Z",
          "level": "INFO",
          "source": "Tools",
          "message": "Applied 1 fixes"
        },
        {
          "timestamp": "2025-08-11T19:06:44.625Z",
          "level": "DEBUG",
          "source": "Orchestrator",
          "message": "Session state updated"
        },
        {
          "timestamp": "2025-08-11T19:06:44.625Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Data flow captured: 3 transformations"
        }
      ],
      "nodes": [],
      "sessionState": {
        "sessionId": "complete_e2e_user_test_1754939073943",
        "createdAt": "2025-08-11T19:04:34.643Z",
        "state": {
          "phase": "documentation",
          "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
          "discovered": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "config": {
                "table": "",
                "columns": "",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "operation": "insert",
                "retryOnFail": true,
                "returnFields": "*",
                "waitBetweenTries": 1000
              },
              "purpose": "Insert data into PostgreSQL table",
              "displayName": "insert postgres data",
              "isPreConfigured": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "config": {
                "modelId": "gpt-3.5-turbo",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "resource": "chat",
                "operation": "message",
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "purpose": "Send a message to an AI model and get response",
              "displayName": "chat with ai",
              "isPreConfigured": true
            }
          ],
          "selected": [
            "task_node_2",
            "task_node_1"
          ],
          "configured": {},
          "validated": {},
          "workflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "name": "Monitor Google Drive",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  },
                  "folderId": "={{ $parameter.folderId }}",
                  "operation": "list"
                },
                "typeVersion": 3
              },
              {
                "id": "if_1",
                "name": "Check for New Images",
                "type": "n8n-nodes-base.if",
                "onError": "continueRegularOutput",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "typeVersion": 2.2
              },
              {
                "id": "googleDrive_2",
                "name": "Download Image",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  },
                  "operation": "download"
                },
                "typeVersion": 3
              },
              {
                "id": "openAi_1",
                "name": "AI Vision Analysis",
                "type": "n8n-nodes-base.openAi",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "options": {
                    "temperature": 0.3
                  },
                  "resource": "image",
                  "maxTokens": 500,
                  "operation": "create"
                },
                "typeVersion": 1.1
              },
              {
                "id": "openAi_2",
                "name": "Generate SEO Description",
                "type": "n8n-nodes-base.openAi",
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "model": "gpt-4",
                  "options": {
                    "maxTokens": 800,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "resource": "text",
                  "operation": "complete"
                },
                "typeVersion": 1.1
              },
              {
                "id": "code_1",
                "name": "Process Image Sizes",
                "type": "n8n-nodes-base.code",
                "onError": "continueRegularOutput",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "typeVersion": 2
              },
              {
                "id": "awsS3_1",
                "name": "Upload to S3",
                "type": "n8n-nodes-base.awsS3",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  },
                  "fileName": "images/{{ $json.name }}",
                  "operation": "upload",
                  "binaryData": true,
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "binaryPropertyName": "imageData"
                },
                "retryOnFail": true,
                "typeVersion": 2
              },
              {
                "id": "set_1",
                "name": "Prepare Database Data",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "type": "string",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "type": "string",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "type": "string",
                        "value": "={{ new Date().toISOString() }}"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "type": "string",
                        "value": "processed"
                      }
                    ]
                  }
                },
                "typeVersion": 3.4
              },
              {
                "id": "postgres_1",
                "name": "Update Database",
                "type": "n8n-nodes-base.postgres",
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "table": "image_metadata",
                  "schema": "public",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "options": {
                    "queryBatching": "independently"
                  },
                  "operation": "insert",
                  "returnFields": "*"
                },
                "typeVersion": 2.6
              },
              {
                "id": "twitter_1",
                "name": "Post to Twitter",
                "type": "n8n-nodes-base.twitter",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "operation": "tweet",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "retryOnFail": true,
                "typeVersion": 2
              },
              {
                "id": "instagram_1",
                "name": "Post to Instagram",
                "type": "n8n-nodes-base.httpRequest",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "url": "https://graph.instagram.com/v18.0/me/media",
                  "method": "POST",
                  "sendBody": true,
                  "sendHeaders": true,
                  "authentication": "predefinedCredentialType",
                  "bodyParameters": {
                    "parameters": [
                      {
                        "name": "image_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "name": "caption",
                        "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                      }
                    ]
                  },
                  "headerParameters": {
                    "parameters": [
                      {
                        "name": "Content-Type",
                        "value": "application/json"
                      }
                    ]
                  },
                  "nodeCredentialType": "instagramApi"
                },
                "retryOnFail": true,
                "typeVersion": 4.2
              },
              {
                "id": "set_2",
                "name": "Update Social Status",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "type": "string",
                        "value": "completed"
                      }
                    ]
                  }
                },
                "typeVersion": 3.4
              }
            ],
            "valid": true,
            "settings": {
              "executionOrder": "v1",
              "saveManualExecutions": true,
              "saveDataErrorExecution": "all",
              "saveDataSuccessExecution": "all"
            },
            "connections": {
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            }
          },
          "buildPhases": [
            {
              "type": "trigger",
              "nodeIds": [
                "googleDrive_1"
              ],
              "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
            },
            {
              "type": "decision",
              "nodeIds": [
                "if_1"
              ],
              "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
            },
            {
              "type": "data_collection",
              "nodeIds": [
                "googleDrive_2"
              ],
              "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
            },
            {
              "type": "data_processing",
              "nodeIds": [
                "openAi_1",
                "openAi_2",
                "code_1"
              ],
              "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
            },
            {
              "type": "storage",
              "nodeIds": [
                "awsS3_1",
                "set_1"
              ],
              "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
            },
            {
              "type": "integration",
              "nodeIds": [
                "postgres_1",
                "twitter_1",
                "instagram_1",
                "set_2"
              ],
              "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
            }
          ],
          "operationHistory": [
            {
              "node": {
                "id": "task_node_2",
                "type": "nodes-base.postgres",
                "config": {
                  "table": "",
                  "columns": "",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "retryOnFail": true,
                  "returnFields": "*",
                  "waitBetweenTries": 1000
                },
                "purpose": "Insert data into PostgreSQL table",
                "displayName": "insert postgres data",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_2",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "node": {
                "id": "task_node_1",
                "type": "nodes-base.openAi",
                "config": {
                  "modelId": "gpt-3.5-turbo",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "user",
                        "content": ""
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "retryOnFail": true,
                  "alwaysOutputData": true,
                  "waitBetweenTries": 5000
                },
                "purpose": "Send a message to an AI model and get response",
                "displayName": "chat with ai",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_1",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "completePhase",
              "phase": "discovery",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "setPhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:25.543Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "parameters": {
                  "table": "image_metadata",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp"
                },
                "retryOnFail": true,
                "typeVersion": 2.4,
                "waitBetweenTries": 1000
              },
              "nodeId": "task_node_2",
              "purpose": "Insert data into PostgreSQL table",
              "nodeType": "nodes-base.postgres",
              "reasoning": "Customized the template for image metadata storage in the workflow context",
              "timestamp": "2025-08-11T19:05:25.792Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.053Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "parameters": {
                  "modelId": "gpt-4",
                  "options": {
                    "maxTokens": 300,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message"
                },
                "retryOnFail": true,
                "typeVersion": 1,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "nodeId": "task_node_1",
              "purpose": "Send a message to an AI model and get response",
              "nodeType": "nodes-base.openAi",
              "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
              "timestamp": "2025-08-11T19:05:26.053Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "completePhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "setPhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.704Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "analyze"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                      "onError": "continueRegularOutput",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "message"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "onError": "stopWorkflow",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "maxTries": 2,
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.instagram",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "type": "image",
                      "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "post",
                      "binaryPropertyName": "web"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  }
                ],
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "setBuildPhases",
              "phases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "completePhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "setPhase",
              "phase": "validation",
              "timestamp": "2025-08-11T19:06:43.290Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_2",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "instagram_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "postgres_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "if_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "awsS3_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_2",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "googleDrive_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "if_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "googleDrive_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "code_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "awsS3_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "postgres_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "twitter_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "instagram_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:44.220Z"
            },
            {
              "type": "completePhase",
              "phase": "validation",
              "timestamp": "2025-08-11T19:06:44.220Z"
            }
          ],
          "pendingClarifications": [],
          "clarificationHistory": []
        }
      },
      "stateChanges": {},
      "dataFlow": {
        "input": {
          "workflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "operation": "list",
                  "folderId": "={{ $parameter.folderId }}",
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  }
                },
                "name": "Monitor Google Drive",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "if_1",
                "type": "n8n-nodes-base.if",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "name": "Check for New Images",
                "typeVersion": 1,
                "onError": "continueRegularOutput"
              },
              {
                "id": "googleDrive_2",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "operation": "download",
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  }
                },
                "name": "Download Image",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "openAi_1",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "resource": "image",
                  "operation": "analyze",
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "maxTokens": 500,
                  "options": {
                    "temperature": 0.3
                  }
                },
                "name": "AI Vision Analysis",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "openAi_2",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "resource": "text",
                  "operation": "message",
                  "model": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 800
                  }
                },
                "name": "Generate SEO Description",
                "typeVersion": 1
              },
              {
                "id": "code_1",
                "type": "n8n-nodes-base.code",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "name": "Process Image Sizes",
                "typeVersion": 2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "awsS3_1",
                "type": "n8n-nodes-base.awsS3",
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "operation": "upload",
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "fileName": "images/{{ $json.name }}",
                  "binaryData": true,
                  "binaryPropertyName": "imageData",
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  }
                },
                "name": "Upload to S3",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_1",
                "type": "n8n-nodes-base.set",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}",
                        "type": "string"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}",
                        "type": "string"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}",
                        "type": "string"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}",
                        "type": "string"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}",
                        "type": "string"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}",
                        "type": "string"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "value": "={{ new Date().toISOString() }}",
                        "type": "string"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "value": "processed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Prepare Database Data",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "postgres_1",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "schema": "public",
                  "table": "image_metadata",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "returnFields": "*",
                  "options": {
                    "queryBatching": "independently"
                  }
                },
                "name": "Update Database",
                "typeVersion": 2
              },
              {
                "id": "twitter_1",
                "type": "n8n-nodes-base.twitter",
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "operation": "tweet",
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "name": "Post to Twitter",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "instagram_1",
                "type": "n8n-nodes-base.instagram",
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "operation": "post",
                  "type": "image",
                  "binaryPropertyName": "web",
                  "caption": "={{ $('Prepare Database Data').item.json.social_caption }}"
                },
                "name": "Post to Instagram",
                "typeVersion": 1,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_2",
                "type": "n8n-nodes-base.set",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "value": "completed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Update Social Status",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              }
            ],
            "connections": {
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            },
            "settings": {
              "executionOrder": "v1",
              "saveDataSuccessExecution": "all",
              "saveDataErrorExecution": "all",
              "saveManualExecutions": true
            }
          }
        },
        "output": {
          "validatedWorkflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "operation": "list",
                  "folderId": "={{ $parameter.folderId }}",
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  }
                },
                "name": "Monitor Google Drive",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "if_1",
                "type": "n8n-nodes-base.if",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "name": "Check for New Images",
                "typeVersion": 2.2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "googleDrive_2",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "operation": "download",
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  }
                },
                "name": "Download Image",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "openAi_1",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "resource": "image",
                  "operation": "create",
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "maxTokens": 500,
                  "options": {
                    "temperature": 0.3
                  }
                },
                "name": "AI Vision Analysis",
                "typeVersion": 1.1,
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "openAi_2",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "resource": "text",
                  "operation": "complete",
                  "model": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 800
                  }
                },
                "name": "Generate SEO Description",
                "typeVersion": 1.1,
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "code_1",
                "type": "n8n-nodes-base.code",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "name": "Process Image Sizes",
                "typeVersion": 2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "awsS3_1",
                "type": "n8n-nodes-base.awsS3",
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "operation": "upload",
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "fileName": "images/{{ $json.name }}",
                  "binaryData": true,
                  "binaryPropertyName": "imageData",
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  }
                },
                "name": "Upload to S3",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_1",
                "type": "n8n-nodes-base.set",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}",
                        "type": "string"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}",
                        "type": "string"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}",
                        "type": "string"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}",
                        "type": "string"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}",
                        "type": "string"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}",
                        "type": "string"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "value": "={{ new Date().toISOString() }}",
                        "type": "string"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "value": "processed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Prepare Database Data",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              },
              {
                "id": "postgres_1",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "operation": "insert",
                  "schema": "public",
                  "table": "image_metadata",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "returnFields": "*",
                  "options": {
                    "queryBatching": "independently"
                  }
                },
                "name": "Update Database",
                "typeVersion": 2.6,
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2
              },
              {
                "id": "twitter_1",
                "type": "n8n-nodes-base.twitter",
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "operation": "tweet",
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "name": "Post to Twitter",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "instagram_1",
                "type": "n8n-nodes-base.httpRequest",
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "method": "POST",
                  "url": "https://graph.instagram.com/v18.0/me/media",
                  "authentication": "predefinedCredentialType",
                  "nodeCredentialType": "instagramApi",
                  "sendHeaders": true,
                  "headerParameters": {
                    "parameters": [
                      {
                        "name": "Content-Type",
                        "value": "application/json"
                      }
                    ]
                  },
                  "sendBody": true,
                  "bodyParameters": {
                    "parameters": [
                      {
                        "name": "image_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "name": "caption",
                        "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                      }
                    ]
                  }
                },
                "name": "Post to Instagram",
                "typeVersion": 4.2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_2",
                "type": "n8n-nodes-base.set",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "value": "completed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Update Social Status",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              }
            ],
            "connections": {
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            },
            "settings": {
              "executionOrder": "v1",
              "saveDataSuccessExecution": "all",
              "saveDataErrorExecution": "all",
              "saveManualExecutions": true
            },
            "valid": true
          },
          "report": {
            "initial": {
              "workflow": {
                "errors": [
                  {
                    "node": "AI Vision Analysis",
                    "message": {
                      "type": "invalid_value",
                      "property": "operation",
                      "message": "Invalid value for 'operation'. Must be one of: create",
                      "fix": "Change operation to one of the valid options"
                    }
                  },
                  {
                    "node": "Generate SEO Description",
                    "message": {
                      "type": "invalid_value",
                      "property": "operation",
                      "message": "Invalid value for 'operation'. Must be one of: complete, edit, moderate",
                      "fix": "Change operation to one of the valid options"
                    }
                  },
                  {
                    "node": "Post to Instagram",
                    "message": "Unknown node type: \"n8n-nodes-base.instagram\". Node types must include the package prefix (e.g., \"n8n-nodes-base.webhook\", not \"webhook\" or \"nodes-base.webhook\")."
                  },
                  {
                    "node": "Generate SEO Description",
                    "message": "Node-level properties onError, maxTries, notes are in the wrong location. They must be at the node level, not inside parameters.",
                    "details": {
                      "fix": "Move these properties from node.parameters to the node level. Example:\n{\n  \"name\": \"Generate SEO Description\",\n  \"type\": \"n8n-nodes-base.openAi\",\n  \"parameters\": { /* operation-specific params */ },\n  \"onError\": \"continueErrorOutput\",  // ✅ Correct location\n  \"retryOnFail\": true,               // ✅ Correct location\n  \"executeOnce\": true,               // ✅ Correct location\n  \"disabled\": false,                 // ✅ Correct location\n  \"credentials\": { /* ... */ }       // ✅ Correct location\n}"
                    }
                  },
                  {
                    "node": "Update Database",
                    "message": "Node-level properties onError, maxTries, notes are in the wrong location. They must be at the node level, not inside parameters.",
                    "details": {
                      "fix": "Move these properties from node.parameters to the node level. Example:\n{\n  \"name\": \"Update Database\",\n  \"type\": \"n8n-nodes-base.postgres\",\n  \"parameters\": { /* operation-specific params */ },\n  \"onError\": \"continueErrorOutput\",  // ✅ Correct location\n  \"retryOnFail\": true,               // ✅ Correct location\n  \"executeOnce\": true,               // ✅ Correct location\n  \"disabled\": false,                 // ✅ Correct location\n  \"credentials\": { /* ... */ }       // ✅ Correct location\n}"
                    }
                  },
                  {
                    "node": "workflow",
                    "message": "Workflow validation failed: e.message.includes is not a function"
                  },
                  {
                    "node": "Check for New Images",
                    "message": "Outdated typeVersion: 1. Latest is 2.2",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "AI Vision Analysis",
                    "message": "Outdated typeVersion: 1. Latest is 1.1",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "Generate SEO Description",
                    "message": "Outdated typeVersion: 1. Latest is 1.1",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "Upload to S3",
                    "message": "Outdated typeVersion: 1. Latest is 2",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Outdated typeVersion: 3. Latest is 3.4",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "Update Database",
                    "message": "Outdated typeVersion: 2. Latest is 2.6",
                    "type": "typeVersion",
                    "severity": "error"
                  },
                  {
                    "node": "Update Social Status",
                    "message": "Outdated typeVersion: 3. Latest is 3.4",
                    "type": "typeVersion",
                    "severity": "error"
                  }
                ],
                "warnings": [
                  {
                    "node": "workflow",
                    "message": "Workflow has no trigger nodes. It can only be executed manually."
                  },
                  {
                    "node": "Generate SEO Description",
                    "message": "Expression warning: messages.values[1].content: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[0].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[1].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[2].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[3].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[4].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Prepare Database Data",
                    "message": "Expression warning: assignments.assignments[5].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Post to Twitter",
                    "message": "Expression warning: text: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Post to Twitter",
                    "message": "Expression warning: additionalFields.attachments: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Post to Instagram",
                    "message": "Expression warning: caption: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Update Social Status",
                    "message": "Expression warning: assignments.assignments[0].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "Update Social Status",
                    "message": "Expression warning: assignments.assignments[1].value: Possible missing $ prefix for variable (e.g., use $json instead of json)"
                  },
                  {
                    "node": "workflow",
                    "message": "Consider adding error handling to your workflow"
                  },
                  {
                    "node": "Generate SEO Description",
                    "message": "openai node interacts with external services but has no error handling configured. Consider using \"onError\" property."
                  },
                  {
                    "node": "Update Database",
                    "message": "Database operation without error handling. Consider adding \"retryOnFail: true\" for connection issues or \"onError: 'continueRegularOutput'\" for non-critical queries."
                  },
                  {
                    "node": "workflow",
                    "message": "Long linear chain detected (11 nodes). Consider breaking into sub-workflows."
                  }
                ],
                "valid": false,
                "statistics": {
                  "totalNodes": 12,
                  "enabledNodes": 12,
                  "triggerNodes": 0,
                  "validConnections": 12,
                  "invalidConnections": 0,
                  "expressionsValidated": 3,
                  "errorCount": 6,
                  "warningCount": 24
                }
              },
              "connections": {
                "errors": [],
                "warnings": []
              },
              "expressions": {
                "errors": [],
                "warnings": []
              }
            },
            "fixesApplied": [
              {
                "type": "entity-replacement",
                "attempt": 1,
                "timestamp": "2025-08-11T19:06:43.101Z",
                "description": "Replaced 8 nodes",
                "reasoning": [
                  "Fixed AI Vision Analysis: Changed operation from 'analyze' to 'create' (valid option), updated typeVersion from 1 to 1.1",
                  "Fixed Generate SEO Description: Changed operation from 'message' to 'complete' (valid option), moved node-level properties (notes, onError, maxTries) from parameters to node level, updated typeVersion from 1 to 1.1",
                  "Fixed Post to Instagram: Replaced invalid 'n8n-nodes-base.instagram' node type with HTTP Request node using Instagram Graph API, updated typeVersion to 4.2",
                  "Fixed Update Database: Moved node-level properties (notes, onError, maxTries) from parameters to node level, updated typeVersion from 2 to 2.6",
                  "Updated all typeVersions to latest: Check for New Images (1→2.2), Upload to S3 (1→2), Prepare Database Data (3→3.4), Update Social Status (3→3.4)"
                ],
                "entitiesFixed": {
                  "nodes": [
                    "openAi_1",
                    "openAi_2",
                    "instagram_1",
                    "postgres_1",
                    "if_1",
                    "awsS3_1",
                    "set_1",
                    "set_2"
                  ],
                  "connections": false
                }
              }
            ],
            "final": {
              "workflow": {
                "errors": [],
                "warnings": [],
                "valid": false
              },
              "connections": {
                "errors": [],
                "warnings": []
              },
              "expressions": {
                "errors": [],
                "warnings": []
              }
            },
            "attempts": 2
          }
        },
        "transformations": [
          "Validation Check",
          "Error Detection",
          "Automatic Fixes"
        ]
      },
      "errors": [
        {
          "type": "ValidationError",
          "message": "Error 1",
          "resolution": "Applied automatic fix",
          "attemptNumber": 1
        }
      ],
      "stateDelta": {
        "added": {
          "state": {
            "workflow": {
              "valid": true
            }
          }
        },
        "modified": {
          "state": {
            "old": {
              "phase": "validation",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "analyze"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                      "onError": "continueRegularOutput",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "message"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "onError": "stopWorkflow",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "maxTries": 2,
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.instagram",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "type": "image",
                      "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "post",
                      "binaryPropertyName": "web"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  }
                ],
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "buildPhases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "setPhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.704Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "analyze"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                          "onError": "continueRegularOutput",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "maxTries": 3,
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "message"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "onError": "stopWorkflow",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "maxTries": 2,
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.instagram",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "type": "image",
                          "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "post",
                          "binaryPropertyName": "web"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      }
                    ],
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setBuildPhases",
                  "phases": [
                    {
                      "type": "trigger",
                      "nodeIds": [
                        "googleDrive_1"
                      ],
                      "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    {
                      "type": "decision",
                      "nodeIds": [
                        "if_1"
                      ],
                      "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    {
                      "type": "data_collection",
                      "nodeIds": [
                        "googleDrive_2"
                      ],
                      "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    {
                      "type": "data_processing",
                      "nodeIds": [
                        "openAi_1",
                        "openAi_2",
                        "code_1"
                      ],
                      "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    {
                      "type": "storage",
                      "nodeIds": [
                        "awsS3_1",
                        "set_1"
                      ],
                      "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                    },
                    {
                      "type": "integration",
                      "nodeIds": [
                        "postgres_1",
                        "twitter_1",
                        "instagram_1",
                        "set_2"
                      ],
                      "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    }
                  ],
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "completePhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.954Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            },
            "new": {
              "phase": "documentation",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "buildPhases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "setPhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.704Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "analyze"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                          "onError": "continueRegularOutput",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "maxTries": 3,
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "message"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "onError": "stopWorkflow",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "maxTries": 2,
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.instagram",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "type": "image",
                          "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "post",
                          "binaryPropertyName": "web"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      }
                    ],
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setBuildPhases",
                  "phases": [
                    {
                      "type": "trigger",
                      "nodeIds": [
                        "googleDrive_1"
                      ],
                      "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    {
                      "type": "decision",
                      "nodeIds": [
                        "if_1"
                      ],
                      "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    {
                      "type": "data_collection",
                      "nodeIds": [
                        "googleDrive_2"
                      ],
                      "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    {
                      "type": "data_processing",
                      "nodeIds": [
                        "openAi_1",
                        "openAi_2",
                        "code_1"
                      ],
                      "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    {
                      "type": "storage",
                      "nodeIds": [
                        "awsS3_1",
                        "set_1"
                      ],
                      "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                    },
                    {
                      "type": "integration",
                      "nodeIds": [
                        "postgres_1",
                        "twitter_1",
                        "instagram_1",
                        "set_2"
                      ],
                      "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    }
                  ],
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "completePhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setPhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:43.290Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "code_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "twitter_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 2.2
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "create"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "complete"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                        "onError": "stopWorkflow",
                        "maxTries": 2,
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2.6
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.httpRequest",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "url": "https://graph.instagram.com/v18.0/me/media",
                          "method": "POST",
                          "sendBody": true,
                          "sendHeaders": true,
                          "authentication": "predefinedCredentialType",
                          "bodyParameters": {
                            "parameters": [
                              {
                                "name": "image_url",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "name": "caption",
                                "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                              }
                            ]
                          },
                          "headerParameters": {
                            "parameters": [
                              {
                                "name": "Content-Type",
                                "value": "application/json"
                              }
                            ]
                          },
                          "nodeCredentialType": "instagramApi"
                        },
                        "retryOnFail": true,
                        "typeVersion": 4.2
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      }
                    ],
                    "valid": true,
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:44.220Z"
                },
                {
                  "type": "completePhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:44.220Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            }
          }
        },
        "removed": [],
        "unchanged": [
          "sessionId",
          "createdAt"
        ]
      }
    },
    "documentation": {
      "name": "Documentation",
      "success": true,
      "metrics": {
        "startTime": 1754939204625,
        "endTime": 1754939205269,
        "duration": 644,
        "memoryUsage": {
          "heapUsed": -1756256,
          "heapTotal": 41762816,
          "external": 6641555
        }
      },
      "logs": [
        {
          "timestamp": "2025-08-11T19:06:44.625Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Starting documentation phase"
        },
        {
          "timestamp": "2025-08-11T19:06:44.626Z",
          "level": "DEBUG",
          "source": "Claude",
          "message": "Sending request for documentation phase"
        },
        {
          "timestamp": "2025-08-11T19:06:45.160Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Added 6 sticky notes for documentation"
        },
        {
          "timestamp": "2025-08-11T19:06:45.268Z",
          "level": "DEBUG",
          "source": "Orchestrator",
          "message": "Session state updated"
        },
        {
          "timestamp": "2025-08-11T19:06:45.269Z",
          "level": "INFO",
          "source": "Orchestrator",
          "message": "Data flow captured: 3 transformations"
        }
      ],
      "nodes": [],
      "sessionState": {
        "sessionId": "complete_e2e_user_test_1754939073943",
        "createdAt": "2025-08-11T19:04:34.643Z",
        "state": {
          "phase": "complete",
          "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
          "discovered": [
            {
              "id": "task_node_2",
              "type": "nodes-base.postgres",
              "config": {
                "table": "",
                "columns": "",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "operation": "insert",
                "retryOnFail": true,
                "returnFields": "*",
                "waitBetweenTries": 1000
              },
              "purpose": "Insert data into PostgreSQL table",
              "displayName": "insert postgres data",
              "isPreConfigured": true
            },
            {
              "id": "task_node_1",
              "type": "nodes-base.openAi",
              "config": {
                "modelId": "gpt-3.5-turbo",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "messages": {
                  "values": [
                    {
                      "role": "user",
                      "content": ""
                    }
                  ]
                },
                "resource": "chat",
                "operation": "message",
                "retryOnFail": true,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "purpose": "Send a message to an AI model and get response",
              "displayName": "chat with ai",
              "isPreConfigured": true
            }
          ],
          "selected": [
            "task_node_2",
            "task_node_1"
          ],
          "configured": {},
          "validated": {},
          "workflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "name": "Monitor Google Drive",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  },
                  "folderId": "={{ $parameter.folderId }}",
                  "operation": "list"
                },
                "typeVersion": 3
              },
              {
                "id": "if_1",
                "name": "Check for New Images",
                "type": "n8n-nodes-base.if",
                "onError": "continueRegularOutput",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "typeVersion": 2.2
              },
              {
                "id": "googleDrive_2",
                "name": "Download Image",
                "type": "n8n-nodes-base.googleDrive",
                "onError": "continueRegularOutput",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  },
                  "operation": "download"
                },
                "typeVersion": 3
              },
              {
                "id": "openAi_1",
                "name": "AI Vision Analysis",
                "type": "n8n-nodes-base.openAi",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "options": {
                    "temperature": 0.3
                  },
                  "resource": "image",
                  "maxTokens": 500,
                  "operation": "create"
                },
                "typeVersion": 1.1
              },
              {
                "id": "openAi_2",
                "name": "Generate SEO Description",
                "type": "n8n-nodes-base.openAi",
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "model": "gpt-4",
                  "options": {
                    "maxTokens": 800,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "resource": "text",
                  "operation": "complete"
                },
                "typeVersion": 1.1
              },
              {
                "id": "code_1",
                "name": "Process Image Sizes",
                "type": "n8n-nodes-base.code",
                "onError": "continueRegularOutput",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "typeVersion": 2
              },
              {
                "id": "awsS3_1",
                "name": "Upload to S3",
                "type": "n8n-nodes-base.awsS3",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  },
                  "fileName": "images/{{ $json.name }}",
                  "operation": "upload",
                  "binaryData": true,
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "binaryPropertyName": "imageData"
                },
                "retryOnFail": true,
                "typeVersion": 2
              },
              {
                "id": "set_1",
                "name": "Prepare Database Data",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "type": "string",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "type": "string",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "type": "string",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "type": "string",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "type": "string",
                        "value": "={{ new Date().toISOString() }}"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "type": "string",
                        "value": "processed"
                      }
                    ]
                  }
                },
                "typeVersion": 3.4
              },
              {
                "id": "postgres_1",
                "name": "Update Database",
                "type": "n8n-nodes-base.postgres",
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "table": "image_metadata",
                  "schema": "public",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "options": {
                    "queryBatching": "independently"
                  },
                  "operation": "insert",
                  "returnFields": "*"
                },
                "typeVersion": 2.6
              },
              {
                "id": "twitter_1",
                "name": "Post to Twitter",
                "type": "n8n-nodes-base.twitter",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "operation": "tweet",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "retryOnFail": true,
                "typeVersion": 2
              },
              {
                "id": "instagram_1",
                "name": "Post to Instagram",
                "type": "n8n-nodes-base.httpRequest",
                "onError": "continueRegularOutput",
                "maxTries": 2,
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "url": "https://graph.instagram.com/v18.0/me/media",
                  "method": "POST",
                  "sendBody": true,
                  "sendHeaders": true,
                  "authentication": "predefinedCredentialType",
                  "bodyParameters": {
                    "parameters": [
                      {
                        "name": "image_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "name": "caption",
                        "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                      }
                    ]
                  },
                  "headerParameters": {
                    "parameters": [
                      {
                        "name": "Content-Type",
                        "value": "application/json"
                      }
                    ]
                  },
                  "nodeCredentialType": "instagramApi"
                },
                "retryOnFail": true,
                "typeVersion": 4.2
              },
              {
                "id": "set_2",
                "name": "Update Social Status",
                "type": "n8n-nodes-base.set",
                "onError": "continueRegularOutput",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "type": "boolean",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "type": "string",
                        "value": "completed"
                      }
                    ]
                  }
                },
                "typeVersion": 3.4
              },
              {
                "id": "sticky_promo_1754939204716",
                "name": "Ghost Team Promo",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  100,
                  -130
                ],
                "parameters": {
                  "color": 4,
                  "width": 280,
                  "height": 710,
                  "content": "## 🚀 Grow your AI business\n\nNeed help in implementing this workflow for your business? Join the Ghost Team community.\n\nThis workflow is made with 💚 by Ghost Team."
                },
                "typeVersion": 1
              },
              {
                "id": "sticky_triggers_1754939204716",
                "name": "Triggers Notes",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  480,
                  -130
                ],
                "parameters": {
                  "color": 6,
                  "width": 310,
                  "height": 710,
                  "content": "## 📥 Triggers\nMonitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                "typeVersion": 1
              },
              {
                "id": "sticky_inputs_1754939204716",
                "name": "Inputs Notes",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  890,
                  -130
                ],
                "parameters": {
                  "color": 5,
                  "width": 310,
                  "height": 710,
                  "content": "## 📊 Inputs\nDownloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                "typeVersion": 1
              },
              {
                "id": "sticky_transforms_1754939204716",
                "name": "Transform Notes",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  1300,
                  -130
                ],
                "parameters": {
                  "color": 4,
                  "width": 910,
                  "height": 710,
                  "content": "## ⚙️ Transform\nUses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                "typeVersion": 1
              },
              {
                "id": "sticky_decision_1754939204716",
                "name": "Decision Notes",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  2310,
                  -130
                ],
                "parameters": {
                  "color": 3,
                  "width": 310,
                  "height": 710,
                  "content": "## 🔀 Decision\nEvaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                "typeVersion": 1
              },
              {
                "id": "sticky_outputs_1754939204716",
                "name": "Outputs Notes",
                "type": "n8n-nodes-base.stickyNote",
                "position": [
                  2720,
                  -130
                ],
                "parameters": {
                  "color": 7,
                  "width": 1510,
                  "height": 710,
                  "content": "## 🚀 Outputs\nUploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions.\n\nUpdates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                },
                "typeVersion": 1
              }
            ],
            "valid": true,
            "settings": {
              "executionOrder": "v1",
              "saveManualExecutions": true,
              "saveDataErrorExecution": "all",
              "saveDataSuccessExecution": "all"
            },
            "connections": {
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            }
          },
          "buildPhases": [
            {
              "type": "trigger",
              "nodeIds": [
                "googleDrive_1"
              ],
              "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
            },
            {
              "type": "decision",
              "nodeIds": [
                "if_1"
              ],
              "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
            },
            {
              "type": "data_collection",
              "nodeIds": [
                "googleDrive_2"
              ],
              "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
            },
            {
              "type": "data_processing",
              "nodeIds": [
                "openAi_1",
                "openAi_2",
                "code_1"
              ],
              "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
            },
            {
              "type": "storage",
              "nodeIds": [
                "awsS3_1",
                "set_1"
              ],
              "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
            },
            {
              "type": "integration",
              "nodeIds": [
                "postgres_1",
                "twitter_1",
                "instagram_1",
                "set_2"
              ],
              "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
            }
          ],
          "operationHistory": [
            {
              "node": {
                "id": "task_node_2",
                "type": "nodes-base.postgres",
                "config": {
                  "table": "",
                  "columns": "",
                  "onError": "stopWorkflow",
                  "maxTries": 2,
                  "operation": "insert",
                  "retryOnFail": true,
                  "returnFields": "*",
                  "waitBetweenTries": 1000
                },
                "purpose": "Insert data into PostgreSQL table",
                "displayName": "insert postgres data",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_2",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "node": {
                "id": "task_node_1",
                "type": "nodes-base.openAi",
                "config": {
                  "modelId": "gpt-3.5-turbo",
                  "onError": "continueRegularOutput",
                  "maxTries": 3,
                  "messages": {
                    "values": [
                      {
                        "role": "user",
                        "content": ""
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message",
                  "retryOnFail": true,
                  "alwaysOutputData": true,
                  "waitBetweenTries": 5000
                },
                "purpose": "Send a message to an AI model and get response",
                "displayName": "chat with ai",
                "isPreConfigured": true
              },
              "type": "discoverNode",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "selectNode",
              "nodeId": "task_node_1",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "completePhase",
              "phase": "discovery",
              "timestamp": "2025-08-11T19:05:12.824Z"
            },
            {
              "type": "setPhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:25.543Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2,
                "parameters": {
                  "table": "image_metadata",
                  "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                  "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                  "operation": "insert",
                  "returnFields": "id, original_filename, upload_timestamp"
                },
                "retryOnFail": true,
                "typeVersion": 2.4,
                "waitBetweenTries": 1000
              },
              "nodeId": "task_node_2",
              "purpose": "Insert data into PostgreSQL table",
              "nodeType": "nodes-base.postgres",
              "reasoning": "Customized the template for image metadata storage in the workflow context",
              "timestamp": "2025-08-11T19:05:25.792Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.053Z"
            },
            {
              "type": "configureNode",
              "config": {
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3,
                "parameters": {
                  "modelId": "gpt-4",
                  "options": {
                    "maxTokens": 300,
                    "temperature": 0.7
                  },
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                      }
                    ]
                  },
                  "resource": "chat",
                  "operation": "message"
                },
                "retryOnFail": true,
                "typeVersion": 1,
                "alwaysOutputData": true,
                "waitBetweenTries": 5000
              },
              "nodeId": "task_node_1",
              "purpose": "Send a message to an AI model and get response",
              "nodeType": "nodes-base.openAi",
              "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
              "timestamp": "2025-08-11T19:05:26.053Z",
              "operationIndex": 0,
              "customizedFromTemplate": true
            },
            {
              "type": "validateNode",
              "nodeId": "task_node_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "completePhase",
              "phase": "configuration",
              "timestamp": "2025-08-11T19:05:26.280Z"
            },
            {
              "type": "setPhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.704Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "analyze"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                      "onError": "continueRegularOutput",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "message"
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "onError": "stopWorkflow",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "maxTries": 2,
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.instagram",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "type": "image",
                      "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "post",
                      "binaryPropertyName": "web"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3
                  }
                ],
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "setBuildPhases",
              "phases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "completePhase",
              "phase": "building",
              "timestamp": "2025-08-11T19:06:18.954Z"
            },
            {
              "type": "setPhase",
              "phase": "validation",
              "timestamp": "2025-08-11T19:06:43.290Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_2",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "instagram_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "postgres_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "if_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "awsS3_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_1",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_2",
              "result": {
                "valid": false,
                "errors": [
                  "Node replaced entirely"
                ]
              },
              "attempt": 1,
              "reasoning": "Node replaced to fix validation errors",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "googleDrive_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "if_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.658Z"
            },
            {
              "type": "validateNode",
              "nodeId": "googleDrive_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "openAi_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "code_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "awsS3_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "postgres_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "twitter_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "instagram_1",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "validateNode",
              "nodeId": "set_2",
              "result": {
                "valid": true,
                "errors": []
              },
              "attempt": 2,
              "reasoning": "Node passed all validation checks",
              "timestamp": "2025-08-11T19:06:43.981Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:44.220Z"
            },
            {
              "type": "completePhase",
              "phase": "validation",
              "timestamp": "2025-08-11T19:06:44.220Z"
            },
            {
              "type": "setPhase",
              "phase": "documentation",
              "timestamp": "2025-08-11T19:06:44.716Z"
            },
            {
              "type": "setWorkflow",
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "sticky_promo_1754939204716",
                    "name": "Ghost Team Promo",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      100,
                      -130
                    ],
                    "parameters": {
                      "color": 4,
                      "width": 280,
                      "height": 710,
                      "content": "## 🚀 Grow your AI business\n\nNeed help in implementing this workflow for your business? Join the Ghost Team community.\n\nThis workflow is made with 💚 by Ghost Team."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_triggers_1754939204716",
                    "name": "Triggers Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      480,
                      -130
                    ],
                    "parameters": {
                      "color": 6,
                      "width": 310,
                      "height": 710,
                      "content": "## 📥 Triggers\nMonitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_inputs_1754939204716",
                    "name": "Inputs Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      890,
                      -130
                    ],
                    "parameters": {
                      "color": 5,
                      "width": 310,
                      "height": 710,
                      "content": "## 📊 Inputs\nDownloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_transforms_1754939204716",
                    "name": "Transform Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      1300,
                      -130
                    ],
                    "parameters": {
                      "color": 4,
                      "width": 910,
                      "height": 710,
                      "content": "## ⚙️ Transform\nUses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_decision_1754939204716",
                    "name": "Decision Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      2310,
                      -130
                    ],
                    "parameters": {
                      "color": 3,
                      "width": 310,
                      "height": 710,
                      "content": "## 🔀 Decision\nEvaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_outputs_1754939204716",
                    "name": "Outputs Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      2720,
                      -130
                    ],
                    "parameters": {
                      "color": 7,
                      "width": 1510,
                      "height": 710,
                      "content": "## 🚀 Outputs\nUploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions.\n\nUpdates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    },
                    "typeVersion": 1
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "timestamp": "2025-08-11T19:06:44.920Z"
            },
            {
              "type": "completePhase",
              "phase": "documentation",
              "timestamp": "2025-08-11T19:06:44.920Z"
            }
          ],
          "pendingClarifications": [],
          "clarificationHistory": []
        }
      },
      "stateChanges": {},
      "dataFlow": {
        "input": {
          "validatedWorkflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "operation": "list",
                  "folderId": "={{ $parameter.folderId }}",
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  }
                },
                "name": "Monitor Google Drive",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "if_1",
                "type": "n8n-nodes-base.if",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "name": "Check for New Images",
                "typeVersion": 2.2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "googleDrive_2",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "operation": "download",
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  }
                },
                "name": "Download Image",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "openAi_1",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "resource": "image",
                  "operation": "create",
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "maxTokens": 500,
                  "options": {
                    "temperature": 0.3
                  }
                },
                "name": "AI Vision Analysis",
                "typeVersion": 1.1,
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "openAi_2",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "resource": "text",
                  "operation": "complete",
                  "model": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 800
                  }
                },
                "name": "Generate SEO Description",
                "typeVersion": 1.1,
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "code_1",
                "type": "n8n-nodes-base.code",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "name": "Process Image Sizes",
                "typeVersion": 2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "awsS3_1",
                "type": "n8n-nodes-base.awsS3",
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "operation": "upload",
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "fileName": "images/{{ $json.name }}",
                  "binaryData": true,
                  "binaryPropertyName": "imageData",
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  }
                },
                "name": "Upload to S3",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_1",
                "type": "n8n-nodes-base.set",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}",
                        "type": "string"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}",
                        "type": "string"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}",
                        "type": "string"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}",
                        "type": "string"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}",
                        "type": "string"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}",
                        "type": "string"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "value": "={{ new Date().toISOString() }}",
                        "type": "string"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "value": "processed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Prepare Database Data",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              },
              {
                "id": "postgres_1",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "operation": "insert",
                  "schema": "public",
                  "table": "image_metadata",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "returnFields": "*",
                  "options": {
                    "queryBatching": "independently"
                  }
                },
                "name": "Update Database",
                "typeVersion": 2.6,
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2
              },
              {
                "id": "twitter_1",
                "type": "n8n-nodes-base.twitter",
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "operation": "tweet",
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "name": "Post to Twitter",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "instagram_1",
                "type": "n8n-nodes-base.httpRequest",
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "method": "POST",
                  "url": "https://graph.instagram.com/v18.0/me/media",
                  "authentication": "predefinedCredentialType",
                  "nodeCredentialType": "instagramApi",
                  "sendHeaders": true,
                  "headerParameters": {
                    "parameters": [
                      {
                        "name": "Content-Type",
                        "value": "application/json"
                      }
                    ]
                  },
                  "sendBody": true,
                  "bodyParameters": {
                    "parameters": [
                      {
                        "name": "image_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "name": "caption",
                        "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                      }
                    ]
                  }
                },
                "name": "Post to Instagram",
                "typeVersion": 4.2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_2",
                "type": "n8n-nodes-base.set",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "value": "completed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Update Social Status",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              }
            ],
            "connections": {
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            },
            "settings": {
              "executionOrder": "v1",
              "saveDataSuccessExecution": "all",
              "saveDataErrorExecution": "all",
              "saveManualExecutions": true
            },
            "valid": true
          }
        },
        "output": {
          "documentedWorkflow": {
            "name": "AI-Powered Image Processing and Social Media Automation",
            "nodes": [
              {
                "id": "googleDrive_1",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  250,
                  300
                ],
                "parameters": {
                  "operation": "list",
                  "folderId": "={{ $parameter.folderId }}",
                  "filters": {
                    "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                  },
                  "options": {
                    "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                  }
                },
                "name": "Monitor Google Drive",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "if_1",
                "type": "n8n-nodes-base.if",
                "position": [
                  550,
                  300
                ],
                "parameters": {
                  "conditions": {
                    "string": [
                      {
                        "value1": "={{ $json.createdTime }}",
                        "operation": "isNotEmpty"
                      }
                    ]
                  }
                },
                "name": "Check for New Images",
                "typeVersion": 2.2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "googleDrive_2",
                "type": "n8n-nodes-base.googleDrive",
                "position": [
                  850,
                  300
                ],
                "parameters": {
                  "operation": "download",
                  "fileId": "={{ $json.id }}",
                  "options": {
                    "binaryPropertyName": "imageData"
                  }
                },
                "name": "Download Image",
                "typeVersion": 3,
                "onError": "continueRegularOutput"
              },
              {
                "id": "openAi_1",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1150,
                  300
                ],
                "parameters": {
                  "resource": "image",
                  "operation": "create",
                  "model": "gpt-4-vision-preview",
                  "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                  "maxTokens": 500,
                  "options": {
                    "temperature": 0.3
                  }
                },
                "name": "AI Vision Analysis",
                "typeVersion": 1.1,
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "openAi_2",
                "type": "n8n-nodes-base.openAi",
                "position": [
                  1450,
                  300
                ],
                "parameters": {
                  "resource": "text",
                  "operation": "complete",
                  "model": "gpt-4",
                  "messages": {
                    "values": [
                      {
                        "role": "system",
                        "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                      },
                      {
                        "role": "user",
                        "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                      }
                    ]
                  },
                  "options": {
                    "temperature": 0.7,
                    "maxTokens": 800
                  }
                },
                "name": "Generate SEO Description",
                "typeVersion": 1.1,
                "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                "onError": "continueRegularOutput",
                "maxTries": 3
              },
              {
                "id": "code_1",
                "type": "n8n-nodes-base.code",
                "position": [
                  1750,
                  300
                ],
                "parameters": {
                  "mode": "runOnceForAllItems",
                  "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                },
                "name": "Process Image Sizes",
                "typeVersion": 2,
                "onError": "continueRegularOutput"
              },
              {
                "id": "awsS3_1",
                "type": "n8n-nodes-base.awsS3",
                "position": [
                  2050,
                  300
                ],
                "parameters": {
                  "operation": "upload",
                  "bucketName": "={{ $parameter.s3Bucket }}",
                  "fileName": "images/{{ $json.name }}",
                  "binaryData": true,
                  "binaryPropertyName": "imageData",
                  "options": {
                    "acl": "public-read",
                    "storageClass": "STANDARD_IA"
                  }
                },
                "name": "Upload to S3",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_1",
                "type": "n8n-nodes-base.set",
                "position": [
                  2350,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "file_id",
                        "name": "file_id",
                        "value": "={{ $('Monitor Google Drive').item.json.id }}",
                        "type": "string"
                      },
                      {
                        "id": "file_name",
                        "name": "file_name",
                        "value": "={{ $('Monitor Google Drive').item.json.name }}",
                        "type": "string"
                      },
                      {
                        "id": "s3_url",
                        "name": "s3_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}",
                        "type": "string"
                      },
                      {
                        "id": "ai_tags",
                        "name": "ai_tags",
                        "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}",
                        "type": "string"
                      },
                      {
                        "id": "seo_description",
                        "name": "seo_description",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}",
                        "type": "string"
                      },
                      {
                        "id": "social_caption",
                        "name": "social_caption",
                        "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}",
                        "type": "string"
                      },
                      {
                        "id": "created_at",
                        "name": "created_at",
                        "value": "={{ new Date().toISOString() }}",
                        "type": "string"
                      },
                      {
                        "id": "status",
                        "name": "status",
                        "value": "processed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Prepare Database Data",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              },
              {
                "id": "postgres_1",
                "type": "n8n-nodes-base.postgres",
                "position": [
                  2650,
                  300
                ],
                "parameters": {
                  "operation": "insert",
                  "schema": "public",
                  "table": "image_metadata",
                  "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                  "returnFields": "*",
                  "options": {
                    "queryBatching": "independently"
                  }
                },
                "name": "Update Database",
                "typeVersion": 2.6,
                "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                "onError": "stopWorkflow",
                "maxTries": 2
              },
              {
                "id": "twitter_1",
                "type": "n8n-nodes-base.twitter",
                "position": [
                  2950,
                  200
                ],
                "parameters": {
                  "operation": "tweet",
                  "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                  "additionalFields": {
                    "attachments": "={{ $('Upload to S3').item.json.Location }}"
                  }
                },
                "name": "Post to Twitter",
                "typeVersion": 2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "instagram_1",
                "type": "n8n-nodes-base.httpRequest",
                "position": [
                  2950,
                  400
                ],
                "parameters": {
                  "method": "POST",
                  "url": "https://graph.instagram.com/v18.0/me/media",
                  "authentication": "predefinedCredentialType",
                  "nodeCredentialType": "instagramApi",
                  "sendHeaders": true,
                  "headerParameters": {
                    "parameters": [
                      {
                        "name": "Content-Type",
                        "value": "application/json"
                      }
                    ]
                  },
                  "sendBody": true,
                  "bodyParameters": {
                    "parameters": [
                      {
                        "name": "image_url",
                        "value": "={{ $('Upload to S3').item.json.Location }}"
                      },
                      {
                        "name": "caption",
                        "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                      }
                    ]
                  }
                },
                "name": "Post to Instagram",
                "typeVersion": 4.2,
                "onError": "continueRegularOutput",
                "retryOnFail": true,
                "maxTries": 2
              },
              {
                "id": "set_2",
                "type": "n8n-nodes-base.set",
                "position": [
                  3250,
                  300
                ],
                "parameters": {
                  "assignments": {
                    "assignments": [
                      {
                        "id": "twitter_posted",
                        "name": "twitter_posted",
                        "value": "={{ $('Post to Twitter').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "instagram_posted",
                        "name": "instagram_posted",
                        "value": "={{ $('Post to Instagram').item.json.id ? true : false }}",
                        "type": "boolean"
                      },
                      {
                        "id": "social_status",
                        "name": "social_status",
                        "value": "completed",
                        "type": "string"
                      }
                    ]
                  }
                },
                "name": "Update Social Status",
                "typeVersion": 3.4,
                "onError": "continueRegularOutput"
              },
              {
                "id": "sticky_promo_1754939204716",
                "name": "Ghost Team Promo",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  100,
                  -130
                ],
                "parameters": {
                  "content": "## 🚀 Grow your AI business\n\nNeed help in implementing this workflow for your business? Join the Ghost Team community.\n\nThis workflow is made with 💚 by Ghost Team.",
                  "height": 710,
                  "width": 280,
                  "color": 4
                }
              },
              {
                "id": "sticky_triggers_1754939204716",
                "name": "Triggers Notes",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  480,
                  -130
                ],
                "parameters": {
                  "content": "## 📥 Triggers\nMonitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected.",
                  "height": 710,
                  "width": 310,
                  "color": 6
                }
              },
              {
                "id": "sticky_inputs_1754939204716",
                "name": "Inputs Notes",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  890,
                  -130
                ],
                "parameters": {
                  "content": "## 📊 Inputs\nDownloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations.",
                  "height": 710,
                  "width": 310,
                  "color": 5
                }
              },
              {
                "id": "sticky_transforms_1754939204716",
                "name": "Transform Notes",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  1300,
                  -130
                ],
                "parameters": {
                  "content": "## ⚙️ Transform\nUses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms.",
                  "height": 710,
                  "width": 910,
                  "color": 4
                }
              },
              {
                "id": "sticky_decision_1754939204716",
                "name": "Decision Notes",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  2310,
                  -130
                ],
                "parameters": {
                  "content": "## 🔀 Decision\nEvaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing.",
                  "height": 710,
                  "width": 310,
                  "color": 3
                }
              },
              {
                "id": "sticky_outputs_1754939204716",
                "name": "Outputs Notes",
                "type": "n8n-nodes-base.stickyNote",
                "typeVersion": 1,
                "position": [
                  2720,
                  -130
                ],
                "parameters": {
                  "content": "## 🚀 Outputs\nUploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions.\n\nUpdates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services.",
                  "height": 710,
                  "width": 1510,
                  "color": 7
                }
              }
            ],
            "connections": {
              "Monitor Google Drive": {
                "main": [
                  [
                    {
                      "node": "Check for New Images",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Check for New Images": {
                "main": [
                  [
                    {
                      "node": "Download Image",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Download Image": {
                "main": [
                  [
                    {
                      "node": "AI Vision Analysis",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "AI Vision Analysis": {
                "main": [
                  [
                    {
                      "node": "Generate SEO Description",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Generate SEO Description": {
                "main": [
                  [
                    {
                      "node": "Process Image Sizes",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Process Image Sizes": {
                "main": [
                  [
                    {
                      "node": "Upload to S3",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Upload to S3": {
                "main": [
                  [
                    {
                      "node": "Prepare Database Data",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Prepare Database Data": {
                "main": [
                  [
                    {
                      "node": "Update Database",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Update Database": {
                "main": [
                  [
                    {
                      "node": "Post to Twitter",
                      "type": "main",
                      "index": 0
                    },
                    {
                      "node": "Post to Instagram",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Twitter": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              },
              "Post to Instagram": {
                "main": [
                  [
                    {
                      "node": "Update Social Status",
                      "type": "main",
                      "index": 0
                    }
                  ]
                ]
              }
            },
            "settings": {
              "executionOrder": "v1",
              "saveDataSuccessExecution": "all",
              "saveDataErrorExecution": "all",
              "saveManualExecutions": true
            },
            "valid": true
          },
          "stickyNotesAdded": 6
        },
        "transformations": [
          "Documentation Generation",
          "Sticky Note Placement",
          "Workflow Finalization"
        ]
      },
      "stateDelta": {
        "added": {},
        "modified": {
          "state": {
            "old": {
              "phase": "documentation",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "buildPhases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "setPhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.704Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "analyze"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                          "onError": "continueRegularOutput",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "maxTries": 3,
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "message"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "onError": "stopWorkflow",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "maxTries": 2,
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.instagram",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "type": "image",
                          "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "post",
                          "binaryPropertyName": "web"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      }
                    ],
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setBuildPhases",
                  "phases": [
                    {
                      "type": "trigger",
                      "nodeIds": [
                        "googleDrive_1"
                      ],
                      "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    {
                      "type": "decision",
                      "nodeIds": [
                        "if_1"
                      ],
                      "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    {
                      "type": "data_collection",
                      "nodeIds": [
                        "googleDrive_2"
                      ],
                      "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    {
                      "type": "data_processing",
                      "nodeIds": [
                        "openAi_1",
                        "openAi_2",
                        "code_1"
                      ],
                      "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    {
                      "type": "storage",
                      "nodeIds": [
                        "awsS3_1",
                        "set_1"
                      ],
                      "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                    },
                    {
                      "type": "integration",
                      "nodeIds": [
                        "postgres_1",
                        "twitter_1",
                        "instagram_1",
                        "set_2"
                      ],
                      "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    }
                  ],
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "completePhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setPhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:43.290Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "code_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "twitter_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 2.2
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "create"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "complete"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                        "onError": "stopWorkflow",
                        "maxTries": 2,
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2.6
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.httpRequest",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "url": "https://graph.instagram.com/v18.0/me/media",
                          "method": "POST",
                          "sendBody": true,
                          "sendHeaders": true,
                          "authentication": "predefinedCredentialType",
                          "bodyParameters": {
                            "parameters": [
                              {
                                "name": "image_url",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "name": "caption",
                                "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                              }
                            ]
                          },
                          "headerParameters": {
                            "parameters": [
                              {
                                "name": "Content-Type",
                                "value": "application/json"
                              }
                            ]
                          },
                          "nodeCredentialType": "instagramApi"
                        },
                        "retryOnFail": true,
                        "typeVersion": 4.2
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      }
                    ],
                    "valid": true,
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:44.220Z"
                },
                {
                  "type": "completePhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:44.220Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            },
            "new": {
              "phase": "complete",
              "userPrompt": "Create a workflow that monitors a Google Drive folder for new images, uses AI vision to analyze and tag them, generates SEO-optimized descriptions with GPT-4, automatically resizes images for web/mobile, uploads to AWS S3, updates a database with metadata, and posts to social media with custom captions based on the content detected.",
              "discovered": [
                {
                  "id": "task_node_2",
                  "type": "nodes-base.postgres",
                  "config": {
                    "table": "",
                    "columns": "",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "operation": "insert",
                    "retryOnFail": true,
                    "returnFields": "*",
                    "waitBetweenTries": 1000
                  },
                  "purpose": "Insert data into PostgreSQL table",
                  "displayName": "insert postgres data",
                  "isPreConfigured": true
                },
                {
                  "id": "task_node_1",
                  "type": "nodes-base.openAi",
                  "config": {
                    "modelId": "gpt-3.5-turbo",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "messages": {
                      "values": [
                        {
                          "role": "user",
                          "content": ""
                        }
                      ]
                    },
                    "resource": "chat",
                    "operation": "message",
                    "retryOnFail": true,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "purpose": "Send a message to an AI model and get response",
                  "displayName": "chat with ai",
                  "isPreConfigured": true
                }
              ],
              "selected": [
                "task_node_2",
                "task_node_1"
              ],
              "configured": {},
              "validated": {},
              "workflow": {
                "name": "AI-Powered Image Processing and Social Media Automation",
                "nodes": [
                  {
                    "id": "googleDrive_1",
                    "name": "Monitor Google Drive",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      250,
                      300
                    ],
                    "parameters": {
                      "filters": {
                        "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                      },
                      "options": {
                        "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                      },
                      "folderId": "={{ $parameter.folderId }}",
                      "operation": "list"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "if_1",
                    "name": "Check for New Images",
                    "type": "n8n-nodes-base.if",
                    "onError": "continueRegularOutput",
                    "position": [
                      550,
                      300
                    ],
                    "parameters": {
                      "conditions": {
                        "string": [
                          {
                            "value1": "={{ $json.createdTime }}",
                            "operation": "isNotEmpty"
                          }
                        ]
                      }
                    },
                    "typeVersion": 2.2
                  },
                  {
                    "id": "googleDrive_2",
                    "name": "Download Image",
                    "type": "n8n-nodes-base.googleDrive",
                    "onError": "continueRegularOutput",
                    "position": [
                      850,
                      300
                    ],
                    "parameters": {
                      "fileId": "={{ $json.id }}",
                      "options": {
                        "binaryPropertyName": "imageData"
                      },
                      "operation": "download"
                    },
                    "typeVersion": 3
                  },
                  {
                    "id": "openAi_1",
                    "name": "AI Vision Analysis",
                    "type": "n8n-nodes-base.openAi",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1150,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4-vision-preview",
                      "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                      "options": {
                        "temperature": 0.3
                      },
                      "resource": "image",
                      "maxTokens": 500,
                      "operation": "create"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "openAi_2",
                    "name": "Generate SEO Description",
                    "type": "n8n-nodes-base.openAi",
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "position": [
                      1450,
                      300
                    ],
                    "parameters": {
                      "model": "gpt-4",
                      "options": {
                        "maxTokens": 800,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                          }
                        ]
                      },
                      "resource": "text",
                      "operation": "complete"
                    },
                    "typeVersion": 1.1
                  },
                  {
                    "id": "code_1",
                    "name": "Process Image Sizes",
                    "type": "n8n-nodes-base.code",
                    "onError": "continueRegularOutput",
                    "position": [
                      1750,
                      300
                    ],
                    "parameters": {
                      "mode": "runOnceForAllItems",
                      "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                    },
                    "typeVersion": 2
                  },
                  {
                    "id": "awsS3_1",
                    "name": "Upload to S3",
                    "type": "n8n-nodes-base.awsS3",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2050,
                      300
                    ],
                    "parameters": {
                      "options": {
                        "acl": "public-read",
                        "storageClass": "STANDARD_IA"
                      },
                      "fileName": "images/{{ $json.name }}",
                      "operation": "upload",
                      "binaryData": true,
                      "bucketName": "={{ $parameter.s3Bucket }}",
                      "binaryPropertyName": "imageData"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "set_1",
                    "name": "Prepare Database Data",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      2350,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "file_id",
                            "name": "file_id",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.id }}"
                          },
                          {
                            "id": "file_name",
                            "name": "file_name",
                            "type": "string",
                            "value": "={{ $('Monitor Google Drive').item.json.name }}"
                          },
                          {
                            "id": "s3_url",
                            "name": "s3_url",
                            "type": "string",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "id": "ai_tags",
                            "name": "ai_tags",
                            "type": "string",
                            "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                          },
                          {
                            "id": "seo_description",
                            "name": "seo_description",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                          },
                          {
                            "id": "social_caption",
                            "name": "social_caption",
                            "type": "string",
                            "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                          },
                          {
                            "id": "created_at",
                            "name": "created_at",
                            "type": "string",
                            "value": "={{ new Date().toISOString() }}"
                          },
                          {
                            "id": "status",
                            "name": "status",
                            "type": "string",
                            "value": "processed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "postgres_1",
                    "name": "Update Database",
                    "type": "n8n-nodes-base.postgres",
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "position": [
                      2650,
                      300
                    ],
                    "parameters": {
                      "table": "image_metadata",
                      "schema": "public",
                      "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                      "options": {
                        "queryBatching": "independently"
                      },
                      "operation": "insert",
                      "returnFields": "*"
                    },
                    "typeVersion": 2.6
                  },
                  {
                    "id": "twitter_1",
                    "name": "Post to Twitter",
                    "type": "n8n-nodes-base.twitter",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      200
                    ],
                    "parameters": {
                      "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                      "operation": "tweet",
                      "additionalFields": {
                        "attachments": "={{ $('Upload to S3').item.json.Location }}"
                      }
                    },
                    "retryOnFail": true,
                    "typeVersion": 2
                  },
                  {
                    "id": "instagram_1",
                    "name": "Post to Instagram",
                    "type": "n8n-nodes-base.httpRequest",
                    "onError": "continueRegularOutput",
                    "maxTries": 2,
                    "position": [
                      2950,
                      400
                    ],
                    "parameters": {
                      "url": "https://graph.instagram.com/v18.0/me/media",
                      "method": "POST",
                      "sendBody": true,
                      "sendHeaders": true,
                      "authentication": "predefinedCredentialType",
                      "bodyParameters": {
                        "parameters": [
                          {
                            "name": "image_url",
                            "value": "={{ $('Upload to S3').item.json.Location }}"
                          },
                          {
                            "name": "caption",
                            "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                          }
                        ]
                      },
                      "headerParameters": {
                        "parameters": [
                          {
                            "name": "Content-Type",
                            "value": "application/json"
                          }
                        ]
                      },
                      "nodeCredentialType": "instagramApi"
                    },
                    "retryOnFail": true,
                    "typeVersion": 4.2
                  },
                  {
                    "id": "set_2",
                    "name": "Update Social Status",
                    "type": "n8n-nodes-base.set",
                    "onError": "continueRegularOutput",
                    "position": [
                      3250,
                      300
                    ],
                    "parameters": {
                      "assignments": {
                        "assignments": [
                          {
                            "id": "twitter_posted",
                            "name": "twitter_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                          },
                          {
                            "id": "instagram_posted",
                            "name": "instagram_posted",
                            "type": "boolean",
                            "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                          },
                          {
                            "id": "social_status",
                            "name": "social_status",
                            "type": "string",
                            "value": "completed"
                          }
                        ]
                      }
                    },
                    "typeVersion": 3.4
                  },
                  {
                    "id": "sticky_promo_1754939204716",
                    "name": "Ghost Team Promo",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      100,
                      -130
                    ],
                    "parameters": {
                      "color": 4,
                      "width": 280,
                      "height": 710,
                      "content": "## 🚀 Grow your AI business\n\nNeed help in implementing this workflow for your business? Join the Ghost Team community.\n\nThis workflow is made with 💚 by Ghost Team."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_triggers_1754939204716",
                    "name": "Triggers Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      480,
                      -130
                    ],
                    "parameters": {
                      "color": 6,
                      "width": 310,
                      "height": 710,
                      "content": "## 📥 Triggers\nMonitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_inputs_1754939204716",
                    "name": "Inputs Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      890,
                      -130
                    ],
                    "parameters": {
                      "color": 5,
                      "width": 310,
                      "height": 710,
                      "content": "## 📊 Inputs\nDownloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_transforms_1754939204716",
                    "name": "Transform Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      1300,
                      -130
                    ],
                    "parameters": {
                      "color": 4,
                      "width": 910,
                      "height": 710,
                      "content": "## ⚙️ Transform\nUses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_decision_1754939204716",
                    "name": "Decision Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      2310,
                      -130
                    ],
                    "parameters": {
                      "color": 3,
                      "width": 310,
                      "height": 710,
                      "content": "## 🔀 Decision\nEvaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    "typeVersion": 1
                  },
                  {
                    "id": "sticky_outputs_1754939204716",
                    "name": "Outputs Notes",
                    "type": "n8n-nodes-base.stickyNote",
                    "position": [
                      2720,
                      -130
                    ],
                    "parameters": {
                      "color": 7,
                      "width": 1510,
                      "height": 710,
                      "content": "## 🚀 Outputs\nUploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions.\n\nUpdates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    },
                    "typeVersion": 1
                  }
                ],
                "valid": true,
                "settings": {
                  "executionOrder": "v1",
                  "saveManualExecutions": true,
                  "saveDataErrorExecution": "all",
                  "saveDataSuccessExecution": "all"
                },
                "connections": {
                  "Upload to S3": {
                    "main": [
                      [
                        {
                          "node": "Prepare Database Data",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Download Image": {
                    "main": [
                      [
                        {
                          "node": "AI Vision Analysis",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Twitter": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Update Database": {
                    "main": [
                      [
                        {
                          "node": "Post to Twitter",
                          "type": "main",
                          "index": 0
                        },
                        {
                          "node": "Post to Instagram",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Post to Instagram": {
                    "main": [
                      [
                        {
                          "node": "Update Social Status",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "AI Vision Analysis": {
                    "main": [
                      [
                        {
                          "node": "Generate SEO Description",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Process Image Sizes": {
                    "main": [
                      [
                        {
                          "node": "Upload to S3",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Check for New Images": {
                    "main": [
                      [
                        {
                          "node": "Download Image",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Monitor Google Drive": {
                    "main": [
                      [
                        {
                          "node": "Check for New Images",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Prepare Database Data": {
                    "main": [
                      [
                        {
                          "node": "Update Database",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  },
                  "Generate SEO Description": {
                    "main": [
                      [
                        {
                          "node": "Process Image Sizes",
                          "type": "main",
                          "index": 0
                        }
                      ]
                    ]
                  }
                }
              },
              "buildPhases": [
                {
                  "type": "trigger",
                  "nodeIds": [
                    "googleDrive_1"
                  ],
                  "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                },
                {
                  "type": "decision",
                  "nodeIds": [
                    "if_1"
                  ],
                  "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                },
                {
                  "type": "data_collection",
                  "nodeIds": [
                    "googleDrive_2"
                  ],
                  "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                },
                {
                  "type": "data_processing",
                  "nodeIds": [
                    "openAi_1",
                    "openAi_2",
                    "code_1"
                  ],
                  "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                },
                {
                  "type": "storage",
                  "nodeIds": [
                    "awsS3_1",
                    "set_1"
                  ],
                  "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                },
                {
                  "type": "integration",
                  "nodeIds": [
                    "postgres_1",
                    "twitter_1",
                    "instagram_1",
                    "set_2"
                  ],
                  "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                }
              ],
              "operationHistory": [
                {
                  "node": {
                    "id": "task_node_2",
                    "type": "nodes-base.postgres",
                    "config": {
                      "table": "",
                      "columns": "",
                      "onError": "stopWorkflow",
                      "maxTries": 2,
                      "operation": "insert",
                      "retryOnFail": true,
                      "returnFields": "*",
                      "waitBetweenTries": 1000
                    },
                    "purpose": "Insert data into PostgreSQL table",
                    "displayName": "insert postgres data",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_2",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "node": {
                    "id": "task_node_1",
                    "type": "nodes-base.openAi",
                    "config": {
                      "modelId": "gpt-3.5-turbo",
                      "onError": "continueRegularOutput",
                      "maxTries": 3,
                      "messages": {
                        "values": [
                          {
                            "role": "user",
                            "content": ""
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message",
                      "retryOnFail": true,
                      "alwaysOutputData": true,
                      "waitBetweenTries": 5000
                    },
                    "purpose": "Send a message to an AI model and get response",
                    "displayName": "chat with ai",
                    "isPreConfigured": true
                  },
                  "type": "discoverNode",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "selectNode",
                  "nodeId": "task_node_1",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "completePhase",
                  "phase": "discovery",
                  "timestamp": "2025-08-11T19:05:12.824Z"
                },
                {
                  "type": "setPhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:25.543Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                    "onError": "stopWorkflow",
                    "maxTries": 2,
                    "parameters": {
                      "table": "image_metadata",
                      "values": "{{ $json.filename }}, {{ $json.s3_web_url }}, {{ $json.s3_mobile_url }}, {{ $json.ai_tags }}, {{ $json.seo_description }}, {{ $json.content_analysis }}, NOW(), false, {{ $json.drive_file_id }}",
                      "columns": "original_filename, s3_web_url, s3_mobile_url, ai_tags, seo_description, content_analysis, upload_timestamp, social_media_posted, drive_file_id",
                      "operation": "insert",
                      "returnFields": "id, original_filename, upload_timestamp"
                    },
                    "retryOnFail": true,
                    "typeVersion": 2.4,
                    "waitBetweenTries": 1000
                  },
                  "nodeId": "task_node_2",
                  "purpose": "Insert data into PostgreSQL table",
                  "nodeType": "nodes-base.postgres",
                  "reasoning": "Customized the template for image metadata storage in the workflow context",
                  "timestamp": "2025-08-11T19:05:25.792Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.053Z"
                },
                {
                  "type": "configureNode",
                  "config": {
                    "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                    "onError": "continueRegularOutput",
                    "maxTries": 3,
                    "parameters": {
                      "modelId": "gpt-4",
                      "options": {
                        "maxTokens": 300,
                        "temperature": 0.7
                      },
                      "messages": {
                        "values": [
                          {
                            "role": "system",
                            "content": "You are an expert SEO content writer specializing in image descriptions for social media and web content. Create engaging, SEO-optimized descriptions that incorporate relevant keywords naturally."
                          },
                          {
                            "role": "user",
                            "content": "Based on this image analysis data: {{ $json.visionAnalysis }}\n\nAnd these detected tags: {{ $json.tags }}\n\nCreate an SEO-optimized description for this image that:\n1. Is 150-200 characters for social media\n2. Includes relevant keywords naturally\n3. Is engaging and descriptive\n4. Mentions key visual elements\n5. Uses appropriate hashtags\n\nImage filename: {{ $json.filename }}\nDetected objects: {{ $json.detectedObjects }}\nColors: {{ $json.dominantColors }}\nScene type: {{ $json.sceneType }}"
                          }
                        ]
                      },
                      "resource": "chat",
                      "operation": "message"
                    },
                    "retryOnFail": true,
                    "typeVersion": 1,
                    "alwaysOutputData": true,
                    "waitBetweenTries": 5000
                  },
                  "nodeId": "task_node_1",
                  "purpose": "Send a message to an AI model and get response",
                  "nodeType": "nodes-base.openAi",
                  "reasoning": "Upgraded model from gpt-3.5-turbo to gpt-4 as specified in the user's requirements for higher quality SEO content generation",
                  "timestamp": "2025-08-11T19:05:26.053Z",
                  "operationIndex": 0,
                  "customizedFromTemplate": true
                },
                {
                  "type": "validateNode",
                  "nodeId": "task_node_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "completePhase",
                  "phase": "configuration",
                  "timestamp": "2025-08-11T19:05:26.280Z"
                },
                {
                  "type": "setPhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.704Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "analyze"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                          "onError": "continueRegularOutput",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "maxTries": 3,
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "message"
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "onError": "stopWorkflow",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "maxTries": 2,
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.instagram",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "type": "image",
                          "caption": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "post",
                          "binaryPropertyName": "web"
                        },
                        "retryOnFail": true,
                        "typeVersion": 1
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3
                      }
                    ],
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setBuildPhases",
                  "phases": [
                    {
                      "type": "trigger",
                      "nodeIds": [
                        "googleDrive_1"
                      ],
                      "description": "Monitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                    },
                    {
                      "type": "decision",
                      "nodeIds": [
                        "if_1"
                      ],
                      "description": "Evaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                    },
                    {
                      "type": "data_collection",
                      "nodeIds": [
                        "googleDrive_2"
                      ],
                      "description": "Downloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                    },
                    {
                      "type": "data_processing",
                      "nodeIds": [
                        "openAi_1",
                        "openAi_2",
                        "code_1"
                      ],
                      "description": "Uses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                    },
                    {
                      "type": "storage",
                      "nodeIds": [
                        "awsS3_1",
                        "set_1"
                      ],
                      "description": "Uploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions."
                    },
                    {
                      "type": "integration",
                      "nodeIds": [
                        "postgres_1",
                        "twitter_1",
                        "instagram_1",
                        "set_2"
                      ],
                      "description": "Updates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                    }
                  ],
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "completePhase",
                  "phase": "building",
                  "timestamp": "2025-08-11T19:06:18.954Z"
                },
                {
                  "type": "setPhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:43.290Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": false,
                    "errors": [
                      "Node replaced entirely"
                    ]
                  },
                  "attempt": 1,
                  "reasoning": "Node replaced to fix validation errors",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "if_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.658Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "googleDrive_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "openAi_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "code_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "awsS3_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "postgres_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "twitter_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "instagram_1",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "validateNode",
                  "nodeId": "set_2",
                  "result": {
                    "valid": true,
                    "errors": []
                  },
                  "attempt": 2,
                  "reasoning": "Node passed all validation checks",
                  "timestamp": "2025-08-11T19:06:43.981Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 2.2
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "create"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "complete"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                        "onError": "stopWorkflow",
                        "maxTries": 2,
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2.6
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.httpRequest",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "url": "https://graph.instagram.com/v18.0/me/media",
                          "method": "POST",
                          "sendBody": true,
                          "sendHeaders": true,
                          "authentication": "predefinedCredentialType",
                          "bodyParameters": {
                            "parameters": [
                              {
                                "name": "image_url",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "name": "caption",
                                "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                              }
                            ]
                          },
                          "headerParameters": {
                            "parameters": [
                              {
                                "name": "Content-Type",
                                "value": "application/json"
                              }
                            ]
                          },
                          "nodeCredentialType": "instagramApi"
                        },
                        "retryOnFail": true,
                        "typeVersion": 4.2
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      }
                    ],
                    "valid": true,
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:44.220Z"
                },
                {
                  "type": "completePhase",
                  "phase": "validation",
                  "timestamp": "2025-08-11T19:06:44.220Z"
                },
                {
                  "type": "setPhase",
                  "phase": "documentation",
                  "timestamp": "2025-08-11T19:06:44.716Z"
                },
                {
                  "type": "setWorkflow",
                  "workflow": {
                    "name": "AI-Powered Image Processing and Social Media Automation",
                    "nodes": [
                      {
                        "id": "googleDrive_1",
                        "name": "Monitor Google Drive",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          250,
                          300
                        ],
                        "parameters": {
                          "filters": {
                            "mimeType": "image/jpeg,image/png,image/gif,image/webp"
                          },
                          "options": {
                            "fields": "files(id,name,mimeType,createdTime,size,webViewLink)"
                          },
                          "folderId": "={{ $parameter.folderId }}",
                          "operation": "list"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "if_1",
                        "name": "Check for New Images",
                        "type": "n8n-nodes-base.if",
                        "onError": "continueRegularOutput",
                        "position": [
                          550,
                          300
                        ],
                        "parameters": {
                          "conditions": {
                            "string": [
                              {
                                "value1": "={{ $json.createdTime }}",
                                "operation": "isNotEmpty"
                              }
                            ]
                          }
                        },
                        "typeVersion": 2.2
                      },
                      {
                        "id": "googleDrive_2",
                        "name": "Download Image",
                        "type": "n8n-nodes-base.googleDrive",
                        "onError": "continueRegularOutput",
                        "position": [
                          850,
                          300
                        ],
                        "parameters": {
                          "fileId": "={{ $json.id }}",
                          "options": {
                            "binaryPropertyName": "imageData"
                          },
                          "operation": "download"
                        },
                        "typeVersion": 3
                      },
                      {
                        "id": "openAi_1",
                        "name": "AI Vision Analysis",
                        "type": "n8n-nodes-base.openAi",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1150,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4-vision-preview",
                          "prompt": "Analyze this image and provide: 1) A list of objects, people, and scenes detected 2) Dominant colors 3) Mood/atmosphere 4) Suggested hashtags 5) Key visual elements for SEO. Format as JSON with keys: objects, colors, mood, hashtags, elements.",
                          "options": {
                            "temperature": 0.3
                          },
                          "resource": "image",
                          "maxTokens": 500,
                          "operation": "create"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "openAi_2",
                        "name": "Generate SEO Description",
                        "type": "n8n-nodes-base.openAi",
                        "notes": "Generate SEO-optimized descriptions for images using GPT-4 based on AI vision analysis and detected content tags",
                        "onError": "continueRegularOutput",
                        "maxTries": 3,
                        "position": [
                          1450,
                          300
                        ],
                        "parameters": {
                          "model": "gpt-4",
                          "options": {
                            "maxTokens": 800,
                            "temperature": 0.7
                          },
                          "messages": {
                            "values": [
                              {
                                "role": "system",
                                "content": "You are an SEO content specialist. Create compelling, SEO-optimized descriptions for images based on AI vision analysis."
                              },
                              {
                                "role": "user",
                                "content": "Based on this image analysis: {{ $('AI Vision Analysis').item.json.choices[0].message.content }}, create: 1) SEO-optimized title (60 chars max) 2) Meta description (160 chars max) 3) Alt text (125 chars max) 4) Social media caption with hashtags 5) Long description for blog/website. Format as JSON."
                              }
                            ]
                          },
                          "resource": "text",
                          "operation": "complete"
                        },
                        "typeVersion": 1.1
                      },
                      {
                        "id": "code_1",
                        "name": "Process Image Sizes",
                        "type": "n8n-nodes-base.code",
                        "onError": "continueRegularOutput",
                        "position": [
                          1750,
                          300
                        ],
                        "parameters": {
                          "mode": "runOnceForAllItems",
                          "jsCode": "// Image resizing logic for web and mobile\nconst sharp = require('sharp');\nconst items = $input.all();\nconst results = [];\n\nfor (const item of items) {\n  const imageBuffer = item.binary.imageData.data;\n  \n  // Create different sizes\n  const sizes = {\n    thumbnail: { width: 150, height: 150 },\n    mobile: { width: 480, height: 320 },\n    web: { width: 1200, height: 800 },\n    social: { width: 1080, height: 1080 }\n  };\n  \n  const resizedImages = {};\n  \n  for (const [sizeName, dimensions] of Object.entries(sizes)) {\n    const resized = await sharp(imageBuffer)\n      .resize(dimensions.width, dimensions.height, { fit: 'cover' })\n      .jpeg({ quality: 85 })\n      .toBuffer();\n    \n    resizedImages[sizeName] = {\n      data: resized,\n      mimeType: 'image/jpeg',\n      fileName: `${item.json.name.split('.')[0]}_${sizeName}.jpg`\n    };\n  }\n  \n  results.push({\n    json: {\n      ...item.json,\n      resizedImages: Object.keys(resizedImages),\n      originalSize: imageBuffer.length\n    },\n    binary: {\n      ...item.binary,\n      ...resizedImages\n    }\n  });\n}\n\nreturn results;"
                        },
                        "typeVersion": 2
                      },
                      {
                        "id": "awsS3_1",
                        "name": "Upload to S3",
                        "type": "n8n-nodes-base.awsS3",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2050,
                          300
                        ],
                        "parameters": {
                          "options": {
                            "acl": "public-read",
                            "storageClass": "STANDARD_IA"
                          },
                          "fileName": "images/{{ $json.name }}",
                          "operation": "upload",
                          "binaryData": true,
                          "bucketName": "={{ $parameter.s3Bucket }}",
                          "binaryPropertyName": "imageData"
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "set_1",
                        "name": "Prepare Database Data",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          2350,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "file_id",
                                "name": "file_id",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.id }}"
                              },
                              {
                                "id": "file_name",
                                "name": "file_name",
                                "type": "string",
                                "value": "={{ $('Monitor Google Drive').item.json.name }}"
                              },
                              {
                                "id": "s3_url",
                                "name": "s3_url",
                                "type": "string",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "id": "ai_tags",
                                "name": "ai_tags",
                                "type": "string",
                                "value": "={{ JSON.parse($('AI Vision Analysis').item.json.choices[0].message.content).hashtags }}"
                              },
                              {
                                "id": "seo_description",
                                "name": "seo_description",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).meta_description }}"
                              },
                              {
                                "id": "social_caption",
                                "name": "social_caption",
                                "type": "string",
                                "value": "={{ JSON.parse($('Generate SEO Description').item.json.choices[0].message.content).social_caption }}"
                              },
                              {
                                "id": "created_at",
                                "name": "created_at",
                                "type": "string",
                                "value": "={{ new Date().toISOString() }}"
                              },
                              {
                                "id": "status",
                                "name": "status",
                                "type": "string",
                                "value": "processed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      },
                      {
                        "id": "postgres_1",
                        "name": "Update Database",
                        "type": "n8n-nodes-base.postgres",
                        "notes": "Insert image metadata into PostgreSQL database including file paths, AI-generated tags, descriptions, and social media posting status",
                        "onError": "stopWorkflow",
                        "maxTries": 2,
                        "position": [
                          2650,
                          300
                        ],
                        "parameters": {
                          "table": "image_metadata",
                          "schema": "public",
                          "columns": "file_id, file_name, s3_url, ai_tags, seo_description, social_caption, created_at, status",
                          "options": {
                            "queryBatching": "independently"
                          },
                          "operation": "insert",
                          "returnFields": "*"
                        },
                        "typeVersion": 2.6
                      },
                      {
                        "id": "twitter_1",
                        "name": "Post to Twitter",
                        "type": "n8n-nodes-base.twitter",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          200
                        ],
                        "parameters": {
                          "text": "={{ $('Prepare Database Data').item.json.social_caption }}",
                          "operation": "tweet",
                          "additionalFields": {
                            "attachments": "={{ $('Upload to S3').item.json.Location }}"
                          }
                        },
                        "retryOnFail": true,
                        "typeVersion": 2
                      },
                      {
                        "id": "instagram_1",
                        "name": "Post to Instagram",
                        "type": "n8n-nodes-base.httpRequest",
                        "onError": "continueRegularOutput",
                        "maxTries": 2,
                        "position": [
                          2950,
                          400
                        ],
                        "parameters": {
                          "url": "https://graph.instagram.com/v18.0/me/media",
                          "method": "POST",
                          "sendBody": true,
                          "sendHeaders": true,
                          "authentication": "predefinedCredentialType",
                          "bodyParameters": {
                            "parameters": [
                              {
                                "name": "image_url",
                                "value": "={{ $('Upload to S3').item.json.Location }}"
                              },
                              {
                                "name": "caption",
                                "value": "={{ $('Prepare Database Data').item.json.social_caption }}"
                              }
                            ]
                          },
                          "headerParameters": {
                            "parameters": [
                              {
                                "name": "Content-Type",
                                "value": "application/json"
                              }
                            ]
                          },
                          "nodeCredentialType": "instagramApi"
                        },
                        "retryOnFail": true,
                        "typeVersion": 4.2
                      },
                      {
                        "id": "set_2",
                        "name": "Update Social Status",
                        "type": "n8n-nodes-base.set",
                        "onError": "continueRegularOutput",
                        "position": [
                          3250,
                          300
                        ],
                        "parameters": {
                          "assignments": {
                            "assignments": [
                              {
                                "id": "twitter_posted",
                                "name": "twitter_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Twitter').item.json.id ? true : false }}"
                              },
                              {
                                "id": "instagram_posted",
                                "name": "instagram_posted",
                                "type": "boolean",
                                "value": "={{ $('Post to Instagram').item.json.id ? true : false }}"
                              },
                              {
                                "id": "social_status",
                                "name": "social_status",
                                "type": "string",
                                "value": "completed"
                              }
                            ]
                          }
                        },
                        "typeVersion": 3.4
                      },
                      {
                        "id": "sticky_promo_1754939204716",
                        "name": "Ghost Team Promo",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          100,
                          -130
                        ],
                        "parameters": {
                          "color": 4,
                          "width": 280,
                          "height": 710,
                          "content": "## 🚀 Grow your AI business\n\nNeed help in implementing this workflow for your business? Join the Ghost Team community.\n\nThis workflow is made with 💚 by Ghost Team."
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "sticky_triggers_1754939204716",
                        "name": "Triggers Notes",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          480,
                          -130
                        ],
                        "parameters": {
                          "color": 6,
                          "width": 310,
                          "height": 710,
                          "content": "## 📥 Triggers\nMonitors Google Drive folder for new image files and filters them by supported image formats. Acts as the workflow trigger to start processing when new images are detected."
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "sticky_inputs_1754939204716",
                        "name": "Inputs Notes",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          890,
                          -130
                        ],
                        "parameters": {
                          "color": 5,
                          "width": 310,
                          "height": 710,
                          "content": "## 📊 Inputs\nDownloads the actual image file from Google Drive to make it available for AI analysis and processing. Retrieves the binary image data for subsequent operations."
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "sticky_transforms_1754939204716",
                        "name": "Transform Notes",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          1300,
                          -130
                        ],
                        "parameters": {
                          "color": 4,
                          "width": 910,
                          "height": 710,
                          "content": "## ⚙️ Transform\nUses AI vision to analyze image content and detect objects, colors, mood, and visual elements. Generates SEO-optimized descriptions, titles, and social media captions based on the analysis. Creates multiple image sizes for different platforms."
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "sticky_decision_1754939204716",
                        "name": "Decision Notes",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          2310,
                          -130
                        ],
                        "parameters": {
                          "color": 3,
                          "width": 310,
                          "height": 710,
                          "content": "## 🔀 Decision\nEvaluates whether detected files are new images that need processing. Filters out files that don't meet the criteria for further processing."
                        },
                        "typeVersion": 1
                      },
                      {
                        "id": "sticky_outputs_1754939204716",
                        "name": "Outputs Notes",
                        "type": "n8n-nodes-base.stickyNote",
                        "position": [
                          2720,
                          -130
                        ],
                        "parameters": {
                          "color": 7,
                          "width": 1510,
                          "height": 710,
                          "content": "## 🚀 Outputs\nUploads processed images to AWS S3 for permanent storage and public access. Prepares structured metadata for database insertion including file paths, AI tags, and descriptions.\n\nUpdates PostgreSQL database with comprehensive image metadata and posts content to social media platforms. Tracks posting status and completion across all integrated services."
                        },
                        "typeVersion": 1
                      }
                    ],
                    "valid": true,
                    "settings": {
                      "executionOrder": "v1",
                      "saveManualExecutions": true,
                      "saveDataErrorExecution": "all",
                      "saveDataSuccessExecution": "all"
                    },
                    "connections": {
                      "Upload to S3": {
                        "main": [
                          [
                            {
                              "node": "Prepare Database Data",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Download Image": {
                        "main": [
                          [
                            {
                              "node": "AI Vision Analysis",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Twitter": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Update Database": {
                        "main": [
                          [
                            {
                              "node": "Post to Twitter",
                              "type": "main",
                              "index": 0
                            },
                            {
                              "node": "Post to Instagram",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Post to Instagram": {
                        "main": [
                          [
                            {
                              "node": "Update Social Status",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "AI Vision Analysis": {
                        "main": [
                          [
                            {
                              "node": "Generate SEO Description",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Process Image Sizes": {
                        "main": [
                          [
                            {
                              "node": "Upload to S3",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Check for New Images": {
                        "main": [
                          [
                            {
                              "node": "Download Image",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Monitor Google Drive": {
                        "main": [
                          [
                            {
                              "node": "Check for New Images",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Prepare Database Data": {
                        "main": [
                          [
                            {
                              "node": "Update Database",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      },
                      "Generate SEO Description": {
                        "main": [
                          [
                            {
                              "node": "Process Image Sizes",
                              "type": "main",
                              "index": 0
                            }
                          ]
                        ]
                      }
                    }
                  },
                  "timestamp": "2025-08-11T19:06:44.920Z"
                },
                {
                  "type": "completePhase",
                  "phase": "documentation",
                  "timestamp": "2025-08-11T19:06:44.920Z"
                }
              ],
              "pendingClarifications": [],
              "clarificationHistory": []
            }
          }
        },
        "removed": [],
        "unchanged": [
          "sessionId",
          "createdAt"
        ]
      }
    }
  },
  "summary": {
    "totalNodes": 18,
    "totalConnections": 11,
    "validationAttempts": 2,
    "errorsFixed": 1,
    "stickyNotesAdded": 6,
    "performanceScore": 20,
    "qualityScore": 105,
    "completenessScore": 100
  },
  "optimizationSuggestions": [
    "Consider optimizing discovery phase (took 38937ms)",
    "Consider optimizing configuration phase (took 12972ms)",
    "Consider optimizing building phase (took 52810ms)",
    "Consider optimizing validation phase (took 25302ms)"
  ],
  "errorPatterns": [
    {
      "pattern": "ValidationError",
      "frequency": 1,
      "suggestedFix": "Review node configuration requirements and ensure all required fields are set"
    }
  ]
}