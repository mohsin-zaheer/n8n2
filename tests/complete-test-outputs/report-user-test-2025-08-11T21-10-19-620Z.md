# n8n Workflow Builder Test Report

**Test Name:** User Test
**Timestamp:** 2025-08-11T21:09:59.144Z
**Duration:** 20474ms
**Success:** ❌ No

## User Prompt
```
“When a PDF arrives in Gmail, detect its type (invoice, contract, NDA), extract key fields with OCR, rename the file in a standard format, and file it in the correct Google Drive folder.”
```

## Session ID: `complete_e2e_user_test_1754946599144`

## ========== DISCOVERY PHASE ==========

**Status:** ✅ Success
**Duration:** 19848ms
**Memory Delta:** -1MB

### Logs
```
2025-08-11T21:09:59.556Z [INFO] [Orchestrator] Starting discovery phase
2025-08-11T21:09:59.556Z [DEBUG] [Claude] Sending request for discovery phase
2025-08-11T21:10:12.642Z [INFO] [MCP] Calling tool: get_node_for_task
2025-08-11T21:10:12.642Z [DEBUG] [MCP] Parameters: {"task":"chat_with_ai"}
2025-08-11T21:10:12.643Z [INFO] [MCP] Calling tool: get_node_for_task
2025-08-11T21:10:12.643Z [DEBUG] [MCP] Parameters: {"task":"transform_data"}
2025-08-11T21:10:12.994Z [DEBUG] [MCP] Tool get_node_for_task completed successfully
2025-08-11T21:10:13.333Z [DEBUG] [MCP] Tool get_node_for_task completed successfully
2025-08-11T21:10:13.335Z [INFO] [MCP] Calling tool: search_nodes
2025-08-11T21:10:13.335Z [DEBUG] [MCP] Parameters: {"query":"gmail","limit":20}
2025-08-11T21:10:13.335Z [INFO] [MCP] Calling tool: search_nodes
2025-08-11T21:10:13.335Z [DEBUG] [MCP] Parameters: {"query":"ocr","limit":20}
2025-08-11T21:10:13.335Z [INFO] [MCP] Calling tool: search_nodes
2025-08-11T21:10:13.335Z [DEBUG] [MCP] Parameters: {"query":"google","limit":20}
2025-08-11T21:10:13.460Z [DEBUG] [MCP] Tool search_nodes completed successfully
2025-08-11T21:10:13.486Z [DEBUG] [MCP] Tool search_nodes completed successfully
2025-08-11T21:10:13.553Z [DEBUG] [MCP] Tool search_nodes completed successfully
2025-08-11T21:10:19.309Z [INFO] [Tools] Added node: nodes-base.openAi (Send a message to an AI model and get response)
2025-08-11T21:10:19.309Z [INFO] [Tools] Added node: nodes-base.code (Transform data structure using JavaScript)
2025-08-11T21:10:19.310Z [INFO] [Tools] Added node: nodes-base.gmailTrigger (Monitor Gmail for incoming PDF attachments and trigger workflow)
2025-08-11T21:10:19.310Z [INFO] [Tools] Added node: nodes-base.uproc (Perform OCR text extraction on PDF documents)
2025-08-11T21:10:19.403Z [DEBUG] [Orchestrator] Session state updated
2025-08-11T21:10:19.403Z [INFO] [Orchestrator] Data flow captured: 3 transformations
```

### Nodes
- **nodes-base.openAi** (ID: task_node_1)
  - Purpose: Send a message to an AI model and get response
- **nodes-base.code** (ID: task_node_2)
  - Purpose: Transform data structure using JavaScript
- **nodes-base.gmailTrigger** (ID: search_node_1)
  - Purpose: Monitor Gmail for incoming PDF attachments and trigger workflow
- **nodes-base.uproc** (ID: search_node_2)
  - Purpose: Perform OCR text extraction on PDF documents

### Data Flow
**Input:**
```json
{
  "prompt": "“When a PDF arrives in Gmail, detect its type (invoice, contract, NDA), extract key fields with OCR, rename the file in a standard format, and file it in the correct Google Drive folder.”"
}
```

**Output:**
```json
{
  "nodes": [
    {
      "id": "task_node_1",
      "type": "nodes-base.openAi",
      "displayName": "chat with ai",
      "purpose": "Send a message to an AI model and get response",
      "isPreConfigured": true,
      "config": {
        "resource": "chat",
        "operation": "message",
        "modelId": "gpt-3.5-turbo",
        "messages": {
          "values": [
            {
              "role": "user",
              "content": ""
            }
          ]
        },
        "onError": "continueRegularOutput",
        "retryOnFail": true,
        "maxTries": 3,
        "waitBetweenTries": 5000,
        "alwaysOutputData": true
      }
    },
    {
      "id": "task_node_2",
      "type": "nodes-base.code",
      "displayName": "transform data",
      "purpose": "Transform data structure using JavaScript",
      "isPreConfigured": true,
      "config": {
        "language": "javaScript",
        "jsCode": "// Transform each item\nconst results = [];\n\nfor (const item of items) {\n  results.push({\n    json: {\n      // Transform your data here\n      id: item.json.id,\n      processedAt: new Date().toISOString()\n    }\n  });\n}\n\nreturn results;"
      }
    },
    {
      "id": "search_node_1",
      "type": "nodes-base.gmailTrigger",
      "displayName": "nodes-base.gmailTrigger",
      "purpose": "Monitor Gmail for incoming PDF attachments and trigger workflow",
      "needsConfiguration": true
    },
    {
      "id": "search_node_2",
      "type": "nodes-base.uproc",
      "displayName": "nodes-base.uproc",
      "purpose": "Perform OCR text extraction on PDF documents",
      "needsConfiguration": true
    }
  ]
}
```

**Transformations:**
- Intent Analysis
- Node Discovery
- Selection

### Session State (Baseline)
```json
{
  "sessionId": "complete_e2e_user_test_1754946599144",
  "createdAt": "2025-08-11T21:09:59.545Z",
  "state": {
    "phase": "discovery",
    "userPrompt": "“When a PDF arrives in Gmail, detect its type (invoice, contract, NDA), extract key fields with OCR, rename the file in a standard format, and file it in the correct Google Drive folder.”",
    "discovered": [],
    "selected": [],
    "configured": {},
    "validated": {},
    "workflow": {
      "nodes": [],
      "settings": {},
      "connections": {}
    },
    "buildPhases": [],
    "operationHistory": [],
    "pendingClarifications": [],
    "clarificationHistory": []
  }
}
```

## ========== CONFIGURATION PHASE ==========

**Status:** ❌ Failed
**Duration:** 214ms
**Memory Delta:** 0MB

### Logs
```
2025-08-11T21:10:19.404Z [INFO] [Orchestrator] Starting configuration phase
2025-08-11T21:10:19.404Z [DEBUG] [Claude] Sending request for configuration phase
2025-08-11T21:10:19.618Z [DEBUG] [Orchestrator] Session state updated
2025-08-11T21:10:19.618Z [INFO] [Orchestrator] Data flow captured: 3 transformations
```

### Errors
1. **validation**: No nodes selected for configuration

### Data Flow
**Input:**
```json
{
  "discoveredNodes": [
    {
      "id": "task_node_1",
      "type": "nodes-base.openAi",
      "displayName": "chat with ai",
      "purpose": "Send a message to an AI model and get response",
      "isPreConfigured": true,
      "config": {
        "resource": "chat",
        "operation": "message",
        "modelId": "gpt-3.5-turbo",
        "messages": {
          "values": [
            {
              "role": "user",
              "content": ""
            }
          ]
        },
        "onError": "continueRegularOutput",
        "retryOnFail": true,
        "maxTries": 3,
        "waitBetweenTries": 5000,
        "alwaysOutputData": true
      }
    },
    {
      "id": "task_node_2",
      "type": "nodes-base.code",
      "displayName": "transform data",
      "purpose": "Transform data structure using JavaScript",
      "isPreConfigured": true,
      "config": {
        "language": "javaScript",
        "jsCode": "// Transform each item\nconst results = [];\n\nfor (const item of items) {\n  results.push({\n    json: {\n      // Transform your data here\n      id: item.json.id,\n      processedAt: new Date().toISOString()\n    }\n  });\n}\n\nreturn results;"
      }
    },
    {
      "id": "search_node_1",
      "type": "nodes-base.gmailTrigger",
      "displayName": "nodes-base.gmailTrigger",
      "purpose": "Monitor Gmail for incoming PDF attachments and trigger workflow",
      "needsConfiguration": true
    },
    {
      "id": "search_node_2",
      "type": "nodes-base.uproc",
      "displayName": "nodes-base.uproc",
      "purpose": "Perform OCR text extraction on PDF documents",
      "needsConfiguration": true
    }
  ]
}
```

**Output:**
```json
{
  "configuredNodes": []
}
```

**Transformations:**
- Parameter Configuration
- Validation
- Type Checking

### Session State Changes
_No changes to session state_

## ========== BUILDING PHASE ==========

**Status:** ❌ Failed
**Duration:** 0ms

### Logs
```
```

## ========== VALIDATION PHASE ==========

**Status:** ❌ Failed
**Duration:** 0ms

### Logs
```
```

## ========== DOCUMENTATION PHASE ==========

**Status:** ❌ Failed
**Duration:** 0ms

### Logs
```
```

## Token Usage Report

## Summary

### Metrics
- **Total Nodes:** 0
- **Total Connections:** 0
- **Validation Attempts:** 0
- **Errors Fixed:** 0
- **Sticky Notes Added:** 0

### Scores
- **Performance Score:** 40/100
- **Quality Score:** 105/100
- **Completeness Score:** 20/100

### Error Patterns
- **validation** (1 occurrences)
  - Suggested Fix: Review error details and adjust workflow accordingly

### Optimization Suggestions
- Consider optimizing discovery phase (took 19848ms)
